<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml">
<link rel="preconnect" href="https://cdn.heapanalytics.com">
<link rel="dns-prefetch" href="https://cdn.heapanalytics.com">
<script>window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])},heap.load(477722926)</script>
<link rel="preconnect" href="https://cdn.heysavvy.com">
<link rel="dns-prefetch" href="https://cdn.heysavvy.com"><title data-react-helmet="true">Functional Aspects | Dark Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/functional-aspects"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Functional Aspects | Dark Documentation"><meta data-react-helmet="true" name="description" content="Implicit Returns"><meta data-react-helmet="true" property="og:description" content="Implicit Returns"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/functional-aspects"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/functional-aspects" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/functional-aspects" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://QFOZBC0VVL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e5ea1f16.css">
<link rel="preload" href="/assets/js/runtime~main.33582f43.js" as="script">
<link rel="preload" href="/assets/js/main.fb8872e8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Dark</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Language</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/languageoverview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/unique-aspects">Unique Aspects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/functional-aspects">Functional Aspects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/languagedetails">Language Details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/datastores">Datastores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/packages">Packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/httpclient">HTTP Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/http">HTTP Responses</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How to</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Functional Aspects</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="implicit-returns">Implicit Returns<a aria-hidden="true" class="hash-link" href="#implicit-returns" title="Direct link to heading">​</a></h2><p>Most languages, especially Javascript, are imperative: you tell it to do one
thing, then do another thing. So whenever you have code, you can add more code
below it to do more stuff.</p><p>Dark uses &quot;implicit returns&quot; (somewhat similar to Ruby, CoffeeScript, Haskell
and Rust). The value of an expression is that last value in that expression. So
in the &quot;hello world&quot; example, you don&#x27;t write <code>return &quot;hello world&quot;</code>, just
<code>&quot;hello world&quot;</code> is enough.</p><p>A handler or function will return the result of the last expression within it.
The return value of an expression is shown below the handler. If the last
expression is blank, Dark will return a 500 error.</p><p>You can see some examples are shown here:
<a href="https://darklang.com/a/sample-returns" target="_blank" rel="noopener noreferrer">https://darklang.com/a/sample-returns</a></p><p>Other computation (side effects) can be done using a statement.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="statements">Statements<a aria-hidden="true" class="hash-link" href="#statements" title="Direct link to heading">​</a></h2><p>If you wish to use a function for side-effect (like <code>DB::set</code> or <code>emit</code>) then
you can put it on the right hand side of a <code>let</code>.</p><p>Dark does not yet support statements without the extra <code>let</code>. When you hit
“enter” at the end of a line that has a return value, we assume you want to make
a new expression. Since that would be the last expression (and returned), we
will automatically add the <code>let _ =</code> to the expression for you.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="pipelines">Pipelines<a aria-hidden="true" class="hash-link" href="#pipelines" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="overview">Overview<a aria-hidden="true" class="hash-link" href="#overview" title="Direct link to heading">​</a></h3><p>In Dark, pipelines make code more readable. Pipelines are similar to method
chaining in OO languages, and pipes in Bash. Rather than calling functions with
their parameters, you pass the previous value into the <strong>first</strong> parameter of an
expression:</p><p><img alt="functional/image2.gif" src="/assets/images/image2-08fea7cbe2af7eac6cd05990c51b0955.gif"></p><p>Traditionally, you call functions with their arguments as parameters. However,
that is often confusing and can be hard to read:</p><p><img alt="functional/Image6.png" src="/assets/images/image6-60aa524b85fe6bcdb005e3d55403c85f.png"></p><p>Pipelines perform a series of transformations on a value in order. Here, we
start with the string <code>&quot;live&quot;</code> and pipe it to <code>String::reverse</code> to produce
<code>&quot;evil&quot;</code>. Then we pipe the result to <code>String::toUppercase</code>, producing the string
<code>&quot;EVIL&quot;</code>:</p><p><img alt="functional/image9.png" src="/assets/images/image9-1c527b1b363073ce6b0fbd5536d20af0.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="how-to-pipe">How to Pipe<a aria-hidden="true" class="hash-link" href="#how-to-pipe" title="Direct link to heading">​</a></h3><p>To start a pipeline, use <code>|&gt;</code> at the end of the expression you are piping.</p><p><img alt="functional/openpipe.png" src="/assets/images/openpipe-fd77fe1f3fed0c98a063c1db14252882.png"></p><p>Once you are in a pipeline, hitting <code>return</code> at the end of the expression will
continue the pipe.</p><p>If you need to pipe a specific subset of an expression, you can select it and
then hit <code>shift+enter</code>. For example, selecting <code>UUID::generate</code> to pipe it into
<code>toString</code>.</p><p><img alt="functional/openpipe.png" src="/assets/images/selectpipe-5c556f5d79eff4ebc940552288f83973.png">
<img alt="functional/openpipe.png" src="/assets/images/successfulpipe-c625f5c32b701404f81ddbc69fe3e849.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="indentation-tip">Indentation Tip<a aria-hidden="true" class="hash-link" href="#indentation-tip" title="Direct link to heading">​</a></h3><p>Look at the indentation to see what is being piped. A common mistake with
pipelines is introducing them at an unintended &quot;level&quot;. For example, here the
piped value is the let expression as a whole, but the author intended to pipe
the expression bound to the variable s:</p><p><img alt="functional/image13.png" src="/assets/images/image13-96990afe170909b604f0a5f8f9c949d9.png"></p><p>_<!-- -->To view the live code provided in the examples above, visit
<a href="https://darklang.com/a/sample-pipeline" target="_blank" rel="noopener noreferrer">https://darklang.com/a/sample-pipeline</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="listmap">List::Map<a aria-hidden="true" class="hash-link" href="#listmap" title="Direct link to heading">​</a></h2><p>Dark does not have a for-loop, it has <code>List::map.</code> This allows you to do
something to a collection of objects in a list.</p><p><code>List::map</code> takes two parameters. In this case we are passing in a list of
integers, and a block.</p><p><img alt="functional/image4.png" src="/assets/images/image4-07e836c631b3c0e3bc3f9927669549a8.png"></p><p>In this case, we multiply each value by two:</p><p><img alt="functional/image17.png" src="/assets/images/image17-7d8e84b643f1e42a4eab5fbfaee9eff7.png"></p><p>If we wanted to do something involving subsequent list items, we can use a List
fold (in this case we pipe the output of our previous list into list::fold),
resulting in a return value of 10,100:</p><p><img alt="functional/image14.png" src="/assets/images/image14-5f1f6eba05580c1353b9be406e5352ef.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="tips">Tips<a aria-hidden="true" class="hash-link" href="#tips" title="Direct link to heading">​</a></h3><ul><li>The live values within a block on <code>List::map</code> will show you the last item in
the list. The live value for <code>List::map</code> shows the full outcome.</li><li><strong>Known bug:</strong> Right now, if you use a map with a function that has a side
effect (like Int::Rand) the analysis will show you the impact of the <em>last</em>
version of the side effect as though it was used for all of them. This is an
analysis bug (you are actually getting a random int each time).</li></ul><p>List map with no side effect:</p><p><img alt="functional/listmap1.png" src="/assets/images/listmap1-804b546f95c111ff99dec164cbed36ec.png"></p><p>List map with a side effect, appears to use the same Int::random each time:</p><p><img alt="functional/listmap2.png" src="/assets/images/listmap2-4fc3b70f25be26fe0b5495b94be68709.png"></p><p>List map with side effect, discrepancy between analysis and values stored in DB:</p><p><img alt="functional/listmap3.png" src="/assets/images/listmap3-11c32326bff088f6d3872b71c6585e57.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="blocks-lambdas-anonymous-functions">Blocks (lambdas, anonymous functions)<a aria-hidden="true" class="hash-link" href="#blocks-lambdas-anonymous-functions" title="Direct link to heading">​</a></h2><p>Blocks are anonymous functions that operate on a set of values. Expressions like
<code>List::map</code> and <code>DB::query</code> take them as parameters.</p><p><img alt="functional/block.png" src="/assets/images/block-27e83d9f6cdd7e5a3aa96b71977a05ab.png"></p><p>To open the block type <code>\</code>. It auto-populates the parameters it is expecting
(like <code>value</code> for <code>Db::query</code> or <code>accum, curr</code> for <code>List::fold</code>).</p><p><img alt="functional/block.png" src="/assets/images/blockfilter-4d56ff432941751e2d074125c45c3ff5.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="match">Match<a aria-hidden="true" class="hash-link" href="#match" title="Direct link to heading">​</a></h2><p>The match expression is used to destructure complex types, such as the <code>Option</code>
type (<code>Just</code> and <code>Nothing</code>) and the <code>Result</code> type (<code>Ok</code> and <code>Error</code>). It can
also be used similarly to switch statements in other languages.</p><p>By default, functions that return Option or Result go to the
<a href="https://darklang.com/docs/unique-aspects#functions-that-use-error-rail" target="_blank" rel="noopener noreferrer">Error Rail</a>.
Once you remove the function from the Error Rail, use match for destructuring.</p><p>Here’s an example of using a match expression with a dictionary lookup.</p><p><img alt="functional/image16.png" src="/assets/images/image16-1ae6b9e27e3825b9558a0605ac339ec2.png"></p><p>Using a variable name as one of the branches will catch all matches. The
variable can be used on the right side of the branch.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/darklang/docs/edit/main/docs/functional-aspects.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/unique-aspects"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Unique Aspects</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/languagedetails"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Language Details<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#implicit-returns" class="table-of-contents__link toc-highlight">Implicit Returns</a></li><li><a href="#statements" class="table-of-contents__link toc-highlight">Statements</a></li><li><a href="#pipelines" class="table-of-contents__link toc-highlight">Pipelines</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#how-to-pipe" class="table-of-contents__link toc-highlight">How to Pipe</a></li><li><a href="#indentation-tip" class="table-of-contents__link toc-highlight">Indentation Tip</a></li></ul></li><li><a href="#listmap" class="table-of-contents__link toc-highlight">List::Map</a><ul><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li></ul></li><li><a href="#blocks-lambdas-anonymous-functions" class="table-of-contents__link toc-highlight">Blocks (lambdas, anonymous functions)</a></li><li><a href="#match" class="table-of-contents__link toc-highlight">Match</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learning</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item">Building Slack Apps</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Blog</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Corp Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.33582f43.js"></script>
<script src="/assets/js/main.fb8872e8.js"></script>
<script async="true" defer="true" src="https://cdn.heysavvy.com/wc/savvy.min.js"></script>
        <savvy-smart-form id="6HBmUjmI12nCuopyvB0B"></savvy-smart-form></body>
</html>