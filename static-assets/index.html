<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/docs/opensearch.xml"><title data-react-helmet="true">Host Static Assets | Dark Documentation</title><meta data-react-helmet="true" property="og:image" content="https://darklang.github.io/docs/img/favicon.ico"><meta data-react-helmet="true" property="twitter:image" content="https://darklang.github.io/docs/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Dark Documentation"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Host Static Assets | Dark Documentation"><meta data-react-helmet="true" name="description" content="Dark supports hosting your static assets."><meta data-react-helmet="true" property="og:description" content="Dark supports hosting your static assets."><meta data-react-helmet="true" property="og:url" content="https://darklang.github.io/docs/static-assets"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://darklang.github.io/docs/static-assets"><link rel="stylesheet" href="/docs/styles.f03e3bc4.css">
<link rel="preload" href="/docs/styles.b5578d85.js" as="script">
<link rel="preload" href="/docs/runtime~main.db5c4636.js" as="script">
<link rel="preload" href="/docs/main.c005a606.js" as="script">
<link rel="preload" href="/docs/1.be50a9d1.js" as="script">
<link rel="preload" href="/docs/2.68e35d1a.js" as="script">
<link rel="preload" href="/docs/89.e2bc15e9.js" as="script">
<link rel="preload" href="/docs/90.4564725c.js" as="script">
<link rel="preload" href="/docs/20ac7829.34503339.js" as="script">
<link rel="preload" href="/docs/17896441.1ae396f7.js" as="script">
<link rel="preload" href="/docs/77b8b134.4261031f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand" to="https://darklang.com"><img class="navbar__logo" src="/docs/img/favicon.ico" alt="Dark logo"><strong class="navbar__title">Dark</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/introduction">Documentation</a><a class="navbar__item navbar__link" href="/docs/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/docs/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/docs/contributing/getting-started">Contributing</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand" to="https://darklang.com"><img class="navbar__logo" src="/docs/img/favicon.ico" alt="Dark logo"><strong class="navbar__title">Dark</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorials/tutorial-intro">Tutorials &amp; Samples</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/slack-apps/slack-intro">Building Slack Apps</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/contributing/getting-started">Contributing</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction">Hello World!</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/your-first">Your First App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/from-python">From Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/from-javascript">From Javascript</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/when-dark">When to use Dark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dark-backend-components">Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trace-driven-development">Trace Driven Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/structured-editing">Structured Editing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-worker">Workers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-cron">Cron</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Language</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/languageoverview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/unique-aspects">Unique Aspects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/functional-aspects">Functional Aspects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/languagedetails">Language Details</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datastores">Datastores</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/packages">Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/httpclient">HTTP Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/http">HTTP Responses</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/static-assets">Host Static Assets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/custom-domains">Use a Custom Domain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cors">CORS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/teamwork">Work with your team</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/feature-flags">Use Feature Flags</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/writing-tests">Write Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/external-infra">Connect to External Infrastructure</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/function-reference">Built-in Function reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/keyboard-mapping">Keyboard Mapping</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/support">Support &amp; Feedback</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues">Known issues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sharing-dark">Sharing Your Dark Projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/changelog">Changelog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/faqs">FAQs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/desktop-client">Desktop Client</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Host Static Assets</h1></header><div class="markdown"><p>Dark supports hosting your static assets.</p><p>Our static assets service is designed to be simple, easy to understand, as well
as composable and configurable. As such, a static assets deploy uploads your
assets to our cloud CDN, and we provide powerful tools in Dark to serve and
configure them.</p><p>A
<a href="https://github.com/marketplace/actions/upload-static-assets-to-dark-canvas" target="_blank" rel="noopener noreferrer">GitHub Action</a>
to automate this process is now available thanks to one of our fantastic
community members, Greg Brimble!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="simple-use-case"></a>Simple Use Case<a aria-hidden="true" tabindex="-1" class="hash-link" href="#simple-use-case" title="Direct link to heading">#</a></h2><p><em>Note: You can see the finished product at
<a href="https://darklang.com/a/sample-static-assets" target="_blank" rel="noopener noreferrer">https://darklang.com/a/sample-static-assets</a></em></p><p>We have a single page app, written in react. It talks to our API, written in
Dark. Now we’d like to deploy that app so that customers can use it too. This
also works in a similar way for Vue applications, with a few caveats called out
in line.</p><p>Here’s how we want our app to work:</p><ul><li>we have an API, served from <code>/api/</code></li><li><code>/</code> serves our <code>index.html</code> page from our assets</li><li><code>index.html</code> should point to our static assets host to fetch other assets</li></ul><p><strong>We’ll focus on the last two things we want our app to do in this document.</strong></p><p>At a high level, here are the steps:</p><ol><li>deploy the assets using the dark-cli app</li><li>load the index page</li><li>configure your react app</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deploying-assets"></a>Deploying Assets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploying-assets" title="Direct link to heading">#</a></h2><p>We have a command-line app to allow you to deploy your assets.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h3><ol><li><p>Go to
<a href="https://dark-cli.storage.googleapis.com/index.html">https://dark-cli.storage.googleapis.com/index.html</a>,
and download the appropriate binary for macOS, Windows, or Linux.</p></li><li><p>On macOS or Linux,</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x dark-cli-apple</span></div></div></div></div></div><p>or</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x dark-cli-linux</span></div></div></div></div></div><p>to make it executable.</p></li><li><p>To confirm it works, run it with <code>-—help</code>:</p><p>macOS:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple --help</span></div></div></div></div></div><p>Linux:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-linux --help</span></div></div></div></div></div><p>Windows:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli.exe --help</span></div></div></div></div></div></li><li><p>On some versions of macOS, you may get one of the the following popups:</p><p><img src="assets/staticassets/macos-popup1.png" alt="Not downloaded from the app store popup"></p><p><img src="assets/staticassets/macos-popup2.png" alt="Developer cannot be verified popup"></p><p>to resolve this, press <code>Ok</code> or <code>Cancel</code> and open
<code>System Preferences -&gt; Security &amp; Privacy -&gt; General</code>.</p><p><img src="assets/staticassets/macos-allow.png" alt="System Preferences -&gt; Security &amp; Privacy -&gt; General -&gt; Allow Anyway"></p><p>Press <code>Allow Anyway</code> and repeat step 3.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configure-your-client"></a>Configure your client<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-your-client" title="Direct link to heading">#</a></h3><p>At the moment, our CDN does not support the use of absolute URLs in the
generated files. For example, if your CSS file links an image at
<code>/static/myimage.png</code>, that file will not load. You need to use relative URLs
instead, in this case <code>./myimage.png</code>.</p><p>Your <code>index.html</code> likely loads other assets, such as <code>app.css</code> or <code>app.js</code>. For
speed, you will load these directly from the Dark CDN, not via your Dark
handler. As such, we’ll need to make some edits to your assets to ensure they’re
always pointing at the CDN for other assets.</p><p>During the deployment of the assets, our backend replaces the string
<code>DARK_STATIC_ASSETS_BASE_URL</code> in all of your assets with the actual URL of this
deployment.</p><p>When not using a framework, prefix asset paths with Dark&#x27;s magic string, for
example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-html codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">img</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">DARK_STATIC_ASSETS_BASE_URL/logo.svg</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span></div></div></div></div></div><p>In React, when compiling your react application, you can use <code>PUBLIC_URL</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PUBLIC_URL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DARK_STATIC_ASSETS_BASE_URL </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span></div></div></div></div></div><p>If using Angular, you can run the following command:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ng build --prod --deploy-url DARK_STATIC_ASSETS_BASE_URL/</span></div></div></div></div></div><p>If using Vue, you likely want to set <code>PUBLIC_PATH</code> instead:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PUBLIC_PATH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DARK_STATIC_ASSETS_BASE_URL</span></div></div></div></div></div><p>Additionally, Vue assumes relative paths. If you are having an issue with your
assets, check to make sure that <code>index.html</code> has not added leading path notation
(<code>/PUBLIC_PATH</code>). If it has, you can manually remove and redeploy. More on using
this for Vue here:</p><p><a href="https://github.com/vuejs/vue-cli/tree/dev/docs/config#publicpath" target="_blank" rel="noopener noreferrer">vuejs/vue-cli</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deploy"></a>Deploy<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy" title="Direct link to heading">#</a></h3><ol><li><p>To deploy, select the directory you want to upload. In this case, we’ll use
React’s default directory <code>build</code>.</p></li><li><p>Run:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The single quotes - around mypass help protect against shell escaping and interpolation.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If your password contains a single quote or a backslash don&#x27;t forget to escape it with a \</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple --canvas myusername-mycanvas --password </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mypass&#x27;</span><span class="token plain"> --user myusername build</span></div></div></div></div></div></li></ol><p>(If you want to avoid shell escaping issues entirely, we also support putting
your creds in <code>~/.netrc</code>; the format for that is documented at
<a href="https://ec.haxx.se/usingcurl/usingcurl-netrc" target="_blank" rel="noopener noreferrer">https://ec.haxx.se/usingcurl/usingcurl-netrc</a>
for machine <code>darklang.com</code>).</p><p>On success, we’ll show you the deploy hash, a URL, and a long URL. These are
where your static assets now live! You can see your static assets in the Routing
table in your canvas:</p><p><img src="assets/staticassets/image1.png" alt="assets/staticassets/image1.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="set-up-your-app-to-load-your-assets"></a>Set up your App to Load your Assets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#set-up-your-app-to-load-your-assets" title="Direct link to heading">#</a></h2><p>If your SPA framework generates an <code>index.html</code>, or you write one yourself, you
can load that for the <code>/</code> route in Dark.</p><ul><li>Add a handler for <code>/</code> to load your <code>index.html</code> page using
<code>StaticAssets::serveLatest &quot;index.html&quot;</code>.</li><li>If you’re using client-side routing, you can also add a handler serving
<code>index.html</code> for <code>/:rest</code> which will be a catch-all handler for any URL
(besides <code>/</code>) that doesn’t have another handler defined for it. This will
allow your users to load your assets from any of your app’s URLs.</li></ul><p>You can copy and paste this example from
<a href="https://darklang.com/a/sample-static-assets" target="_blank" rel="noopener noreferrer">https://darklang.com/a/sample-static-assets</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="implementing-a-fallback-in-the-case-of-a-404"></a>Implementing a Fallback in the Case of a 404<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementing-a-fallback-in-the-case-of-a-404" title="Direct link to heading">#</a></h2><p>If you’re looking to serve a fallback asset, you can use a match statement:</p><p><img src="assets/staticassets/image2.png" alt="assets/staticassets/image2.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="advanced-feature-flags-and-continuous-delivery"></a>Advanced: Feature Flags and Continuous Delivery<a aria-hidden="true" tabindex="-1" class="hash-link" href="#advanced-feature-flags-and-continuous-delivery" title="Direct link to heading">#</a></h2><p>We’ve shown you how to deploy new assets that appear immediately. However, you
often want to control the rollout of those assets, perhaps seeing them yourself,
or only showing them to users who have opted into beta features. As a result, it
is easy to use Dark Static Assets with feature flags.</p><p>Instead of calling <code>HttpClient::serveLatest</code>, you can call <code>HttpClient::serve</code>,
and use the deploy hash from your command line.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="reference"></a>Reference<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reference" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="functions"></a>Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#functions" title="Direct link to heading">#</a></h3><ul><li><code>urlFor &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the given <code>deployHash</code>:</li><li><code>StaticAssets::urlFor &quot;o6vs1aqcbx&quot; &quot;foo.html&quot;</code> -&gt;
<code>&quot;https://ismith-staticassets.darksa.com/stgbcg3kez_zb9-wlbtgta563t8/o6vs1aqcbx/foo.html&quot;</code></li></ul></li><li><code>urlForLatest &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the latest deploy:</li><li><code>StaticAssets::urlForLatest &quot;foo.html&quot;</code> -&gt;
<code>&quot;https://ismith-staticassets.darksa.com/stgbcg3kez_zb9-wlbtgta563t8/o6vs1aqcbx/foo.html&quot;</code></li></ul></li><li><code>fetch &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns the contents of a file for the current canvas and the given
<code>deployHash</code>:</li><li><code>StaticAssets::fetch &quot;o6vs1aqcbx&quot; &quot;foo.html&quot;</code> -&gt;
<code>&quot;&lt;html&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;&quot;</code></li></ul></li><li><code>fetchLatest &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the latest deploy:</li><li><code>StaticAssets::fetchLatest &quot;foo.html&quot;</code> -&gt;
<code>&quot;&lt;html&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;&quot;</code></li></ul></li><li><code>serve &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns the contents of a file for the current canvas and the given
<code>deployHash</code>:</li><li><code>StaticAssets::serve &quot;o6vs1aqcbx&quot; &quot;foo.html&quot;</code> -&gt; responds with the file
<code>foo.html</code> and the headers that the static assets CDN provided</li></ul></li><li><code>serveLatest &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the latest deploy:</li><li><code>StaticAssets::fetchLatest &quot;foo.html&quot;</code> -&gt; responds with the file <code>foo.html</code>
and the headers that the static assets CDN provided</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="command-line-reference"></a>Command line reference<a aria-hidden="true" tabindex="-1" class="hash-link" href="#command-line-reference" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">error: The following required arguments were not provided:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">paths</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --canvas </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">canvas</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --password </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --user </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">user</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">USAGE:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dark-cli-apple </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">FLAGS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">paths</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --canvas </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">canvas</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --password </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --user </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">user</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/http"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« HTTP Responses</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/custom-domains"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Use a Custom Domain »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#simple-use-case" class="table-of-contents__link">Simple Use Case</a></li><li><a href="#deploying-assets" class="table-of-contents__link">Deploying Assets</a><ul><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#configure-your-client" class="table-of-contents__link">Configure your client</a></li><li><a href="#deploy" class="table-of-contents__link">Deploy</a></li></ul></li><li><a href="#set-up-your-app-to-load-your-assets" class="table-of-contents__link">Set up your App to Load your Assets</a></li><li><a href="#implementing-a-fallback-in-the-case-of-a-404" class="table-of-contents__link">Implementing a Fallback in the Case of a 404</a></li><li><a href="#advanced-feature-flags-and-continuous-delivery" class="table-of-contents__link">Advanced: Feature Flags and Continuous Delivery</a></li><li><a href="#reference" class="table-of-contents__link">Reference</a><ul><li><a href="#functions" class="table-of-contents__link">Functions</a></li><li><a href="#command-line-reference" class="table-of-contents__link">Command line reference</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learning</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/launch/demo-video">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://youtube.com/c/Darklang/videos">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs/tutorials">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs/slack-apps">Building Slack Apps</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/about">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://dev.to/darklang">Dev Blog</a></li><li class="footer__item"><a href="https://medium.com/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://medium.com/darklang">Corp Blog</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/slack-invite">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://github.com/darklang/dark">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://github.com/darklang/docs">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/code-of-conduct">Code of Conduct</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Product</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/login">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/signup">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/desktop-client">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/mailing-list">Mailing List</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/styles.b5578d85.js"></script>
<script src="/docs/runtime~main.db5c4636.js"></script>
<script src="/docs/main.c005a606.js"></script>
<script src="/docs/1.be50a9d1.js"></script>
<script src="/docs/2.68e35d1a.js"></script>
<script src="/docs/89.e2bc15e9.js"></script>
<script src="/docs/90.4564725c.js"></script>
<script src="/docs/20ac7829.34503339.js"></script>
<script src="/docs/17896441.1ae396f7.js"></script>
<script src="/docs/77b8b134.4261031f.js"></script>
</body>
</html>