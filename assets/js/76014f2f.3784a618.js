"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6693],{27796:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var a=s(85893),t=s(11151);const r={id:"dark-backend-components",title:"Components",sidebar_label:"Components"},i=void 0,o={id:"discussion/dark-backend-components",title:"Components",description:"When building in Darklang, you are able to create five major backend components,",source:"@site/docs-classic/discussion/dark-backend-components.md",sourceDirName:"discussion",slug:"/discussion/dark-backend-components",permalink:"/discussion/dark-backend-components",draft:!1,unlisted:!1,editUrl:"https://github.com/darklang/docs/edit/main/docs-classic/discussion/dark-backend-components.md",tags:[],version:"current",frontMatter:{id:"dark-backend-components",title:"Components",sidebar_label:"Components"},sidebar:"docs",previous:{title:"Queues",permalink:"/discussion/queues"},next:{title:"Trace Driven Development",permalink:"/discussion/trace-driven-development"}},l={},d=[{value:"Canvas",id:"canvas",level:2},{value:"REST API Endpoints",id:"rest-api-endpoints",level:2},{value:"Background Workers",id:"background-workers",level:2},{value:"CRON",id:"cron",level:2},{value:"REPL",id:"repl",level:2},{value:"Persistent Datastores",id:"persistent-datastores",level:2},{value:"Deleted",id:"deleted",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"When building in Darklang, you are able to create five major backend components,\ncalled handlers:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"API Endpoints (REST)"}),"\n",(0,a.jsx)(n.li,{children:"Background workers (with built in event/queue system)"}),"\n",(0,a.jsx)(n.li,{children:"Scheduled jobs/cron"}),"\n",(0,a.jsx)(n.li,{children:"Persistent Datastores (key-value/hash-map)"}),"\n",(0,a.jsx)(n.li,{children:"REPLs (internal tools)"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["These components live on your canvas. They are created from the sidebar, or by\nhitting ",(0,a.jsx)(n.code,{children:"Cmd/Ctrl-k"})," to bring up the omnibox."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"assests/backend/image2.png",src:s(93133).Z+"",width:"1000",height:"374"})}),"\n",(0,a.jsxs)(n.p,{children:["Darklang code is meant to be written in these handlers. We always recommend\nwriting code within these components, and then extracting that code into a\nfunction, using ",(0,a.jsx)(n.code,{children:"Cmd/Ctrl-\\"}),", as needed. Code written in Darklang is expression\nbased, and as you add an expression it will automatically create blanks for the\nparameters it takes. If you delete an expression, the parameters will also be\nremoved."]}),"\n",(0,a.jsxs)(n.p,{children:["These components ",(0,a.jsx)(n.strong,{children:"do not"})," require you to set up any additional infrastructure\nor deployment processes. As soon as you create them, they\u2019re available and\nupdate as you write code (deployless). Each handler is of one of these types,\nand has a name as well as additional information. You can see examples of each\ncomponent ",(0,a.jsx)(n.a,{href:"https://darklang.com/a/sample-helloworld",children:"here"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"All of these components support core Darklang functionality:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Trace data & live values (see:\n",(0,a.jsx)(n.a,{href:"/discussion/trace-driven-development",children:"Trace Driven Development"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Implicit returns & pipelines (see:\n",(0,a.jsx)(n.a,{href:"/discussion/functional-aspects",children:"Functional Aspects of Darklang"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Autocomplete (i.e. typing ",(0,a.jsx)(n.strong,{children:"DB::"}),") will return all the datastore functions.\nThis also works by type."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["More on each type is below, but we recommend continuing to\n",(0,a.jsx)(n.a,{href:"/discussion/trace-driven-development",children:"Trace Driven Development"})," and coming back when you\nare creating an endpoint."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"canvas",children:"Canvas"}),"\n",(0,a.jsxs)(n.p,{children:["In Darklang, your backend components appear in the browser, on a canvas. These\nare at: [",(0,a.jsx)(n.a,{href:"https://darklang.com/a/username",children:"https://darklang.com/a/username"}),"]"," or\n[",(0,a.jsx)(n.a,{href:"https://darklang.com/a/username-canvasname",children:"https://darklang.com/a/username-canvasname"}),"]."," We intend for you to only have one\ncanvas per company or entirely separate project. You can create any canvas by\nnavigating to it."]}),"\n",(0,a.jsxs)(n.p,{children:["Your endpoints would appear at:\n[",(0,a.jsx)(n.a,{href:"https://username-canvasname.builtwithdark.com/route",children:"https://username-canvasname.builtwithdark.com/route"}),"]"," (we can help you set up\nDNS if you want another domain to point at your canvas)."]}),"\n",(0,a.jsxs)(n.p,{children:["You can navigate the canvas via the left-hand sidebar, or via the omnibox\n(accessible using ",(0,a.jsx)(n.code,{children:"Cmd/Ctrl-k"}),")."]}),"\n",(0,a.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/lJaIy6Z2V_g",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"rest-api-endpoints",children:"REST API Endpoints"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["If you hit an endpoint that does not exist (see:\n",(0,a.jsx)(n.a,{href:"/discussion/trace-driven-development",children:"Trace Driven Development"}),"), the endpoint will\nappear in the 404 section."]}),"\n",(0,a.jsx)(n.li,{children:"Support the standard REST protocols (GET, POST, PATCH, DELETE, PUT)."}),"\n",(0,a.jsxs)(n.li,{children:["Accept URL parameters (ex: /profile/",":username",") and appear as variables within\nthe handler."]}),"\n",(0,a.jsxs)(n.li,{children:["Have implicit returns (see:\n",(0,a.jsx)(n.a,{href:"/discussion/functional-aspects",children:"Functional Aspects of Darklang"}),"), and return JSON by\ndefault."]}),"\n",(0,a.jsx)(n.li,{children:"All traces are available as dots on the left hand side. If you do not have a\ntrace selected, you will see a spinner for all live values."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"background-workers",children:"Background Workers"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Workers receive events via the ",(0,a.jsx)(n.strong,{children:"emit"})," expression, and will appear in the 404\nsection if you emit to a non-existent worker."]}),"\n",(0,a.jsx)(n.li,{children:"Run asynchronously and retry in case of failure."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"cron",children:"CRON"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Runs on a given schedule, selected by developer (every minute, hour, week,\netc)."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"repl",children:"REPL"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Is triggered only by the developer and frequently relies on play buttons (see\n",(0,a.jsx)(n.a,{href:"/discussion/trace-driven-development",children:"Trace Driven Development"}),")."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"persistent-datastores",children:"Persistent Datastores"}),"\n",(0,a.jsx)(n.p,{children:"In Darklang, all datastores are a key-value store - a persistent\nhash-map/dictionary (not a relational database). When looking at a Datastore\nyou\u2019ll see all handlers that call the datastore."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"backend/image3.png",src:s(85123).Z+"",width:"1525",height:"320"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"/reference/framework/datastores",children:"Detailed datastore information"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"deleted",children:"Deleted"}),"\n",(0,a.jsx)(n.p,{children:"If you delete a handler, we save that code for you in the Deleted section of\nyour canvas. Everything you delete is sorted by type, and will remain in that\nsection until you remove it."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"backend/Screen_Shot_2020-01-07_at_4.00.20_PM.png",src:s(35487).Z+"",width:"2236",height:"1080"})})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},35487:(e,n,s)=>{s.d(n,{Z:()=>a});const a=s.p+"assets/images/Screen_Shot_2020-01-07_at_4.00.20_PM-6dcdd456843d9a0d7f725caa2c2f04fe.png"},93133:(e,n,s)=>{s.d(n,{Z:()=>a});const a=s.p+"assets/images/image2-1f4e03cfb9d70ec644d57cd5ee7f6dc5.png"},85123:(e,n,s)=>{s.d(n,{Z:()=>a});const a=s.p+"assets/images/image3-a468c39ddec86cd94a64636849ed0ca4.png"},11151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>i});var a=s(67294);const t={},r=a.createContext(t);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);