"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7213],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=a,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?r.createElement(m,s(s({ref:t},p),{},{components:n})):r.createElement(m,s({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1187:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),s=["components"],i={id:"write-tests",title:"How to Write Tests in Darklang",sidebar_label:"How to write tests"},l=void 0,c={unversionedId:"how-to/write-tests",id:"how-to/write-tests",title:"How to Write Tests in Darklang",description:"At the moment, Darklang does not provide an out of the box testing framework.",source:"@site/docs/how-to/write-tests.md",sourceDirName:"how-to",slug:"/how-to/write-tests",permalink:"/how-to/write-tests",draft:!1,editUrl:"https://github.com/darklang/docs/edit/main/docs/how-to/write-tests.md",tags:[],version:"current",frontMatter:{id:"write-tests",title:"How to Write Tests in Darklang",sidebar_label:"How to write tests"},sidebar:"docs",previous:{title:"How to use Feature Flags",permalink:"/how-to/feature-flags"},next:{title:"Discussion",permalink:"/category/discussion"}},p={},u=[],d={toc:u};function h(e){var t=e.components,i=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"At the moment, Darklang does not provide an out of the box testing framework.\nHowever, it's fairly straightforward to write tests using REPLs and Crons."),(0,o.kt)("p",null,"Let's take a simple example: a character creation process where the creator\nenters the name of their character and allocates 15 skill points into three\npossible skills. There are a few constraints:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The name of the character must be more than 2 characters"),(0,o.kt)("li",{parentName:"ul"},"All 15 skill points must be used, no more and no less.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"writing-tests/function.png",src:n(28519).Z,width:"746",height:"1242"})),(0,o.kt)("p",null,"Let's say we want to write tests to make sure the proper messages are being\nprinted out. All we need to do is create a REPL and call functions that hit all\nof these cases:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"writing-tests/tests.png",src:n(64157).Z,width:"2538",height:"408"})),(0,o.kt)("p",null,"Now, at a glance, we can see that the messages being printed out look the way we\nexpect them to."),(0,o.kt)("p",null,"We can even get fancy, and write logic to check that the printed messages say\nexactly what we want them to without having to read every message. In this\nexample, a portion of the message that gets printed when the name is not long\nenough has been accidentally deleted, so a warning is displayed."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"writing-tests/namecheck.png",src:n(23131).Z,width:"1238",height:"1188"})),(0,o.kt)("p",null,"In the examples above, the tests would need to be run by running the REPL\nmanually. However, the same logic can be written in a cron to make sure the\ntests run at whatever interval you'd prefer."),(0,o.kt)("p",null,"If you're worried about missing a failing test, you can always set up alerts to\nlet you know. This is an example of a cron that runs once an hour and posts a\nmessage to Slack if an incorrect message is found:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"writing-tests/slack.png",src:n(42908).Z,width:"1252",height:"1192"})))}h.isMDXComponent=!0},28519:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/function-0693187a6d94d20d9074482cede2e5d2.png"},23131:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/namecheck-a8c255053f3b784b5519bc5a66775684.png"},42908:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/slack-bc2f9a4b4c0f974eeff87d3d81e3ceb9.png"},64157:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/tests-a0752a5eb771c6ed29a1997238462fec.png"}}]);