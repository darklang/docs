"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8936],{51682:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=n(74848),s=n(28453);const r={title:"Adding your first test"},o=void 0,d={id:"contributing/adding-your-first-test",title:"Adding your first test",description:"Let's talk you through the first contribution. You'll write a small unit test",source:"@site/docs-classic/contributing/adding-your-first-test.md",sourceDirName:"contributing",slug:"/contributing/adding-your-first-test",permalink:"/contributing/adding-your-first-test",draft:!1,unlisted:!1,editUrl:"https://github.com/darklang/docs/edit/main/docs-classic/contributing/adding-your-first-test.md",tags:[],version:"current",frontMatter:{title:"Adding your first test"},sidebar:"Contributing",previous:{title:"Setting up the Darklang repo",permalink:"/contributing/setting-up-the-repo"},next:{title:"Making your first Pull Request",permalink:"/contributing/making-your-first-pull-request"}},a={},c=[{value:"Adding the test",id:"adding-the-test",level:2}];function l(t){const e={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"Let's talk you through the first contribution. You'll write a small unit test\nfor a built-in function. This will get you through the process of contributing\nand get you familiar with how to get code into Darklang."}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsxs)(e.em,{children:["We're assuming you've got the repo is set up and the ",(0,i.jsx)(e.code,{children:"builder"})," script is\nrunning (or if you're running the devcontainer in VSCode, that the devcontainer\nis running)!"]})}),"\n",(0,i.jsx)(e.h2,{id:"adding-the-test",children:"Adding the test"}),"\n",(0,i.jsxs)(e.p,{children:["We keep a list of functions which need tests an the\n",(0,i.jsx)(e.a,{href:"https://github.com/darklang/dark/issues/3262",children:"Test Every Function issue"})," - pick\nyour favorite."]}),"\n",(0,i.jsxs)(e.p,{children:["As an example, let's add one for ",(0,i.jsx)(e.code,{children:"Float::add_v0"}),"."]}),"\n",(0,i.jsxs)(e.p,{children:["Unit tests for Darklang functions are in ",(0,i.jsx)(e.code,{children:'backend/testfiles/execution/*.tests"'}),",\ntypically named after the module we're in (e.g., in this case, we want\n",(0,i.jsx)(e.code,{children:"float.tests"}),"). See\n",(0,i.jsx)(e.a,{href:"https://github.com/darklang/dark/tree/main/backend/testfiles/README.md",children:"testfiles/README.md"}),"\nto see detailed notes on the options of how to write tests. An example test is:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-fsharp",children:"Float.multiply_v0 26.0 0.5 = 13.0\n"})}),"\n",(0,i.jsxs)(e.p,{children:["This tests the function ",(0,i.jsx)(e.code,{children:"Float::multiply_v0"})," by giving it parameters and an\nexpected result. We can write much more complicated functions too"]}),"\n",(0,i.jsxs)(e.p,{children:["Let's make one for ",(0,i.jsx)(e.code,{children:"Float::add_v0"}),":"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"Float.add_v0 26.0 0.5 = 26.5"})}),"\n",(0,i.jsxs)(e.p,{children:["Add this to ",(0,i.jsx)(e.code,{children:"float.tests"}),", save the file, and it should automatically recompile\nand run the test."]}),"\n",(0,i.jsxs)(e.p,{children:["(If you're running the container in VSCode, run\n",(0,i.jsx)(e.code,{children:"./scripts/run-fsharp-tests --filter-test-list float"})," instead)"]}),"\n",(0,i.jsx)(e.p,{children:"Great, we're done!"})]})}function u(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(l,{...t})}):l(t)}},28453:(t,e,n)=>{n.d(e,{R:()=>o,x:()=>d});var i=n(96540);const s={},r=i.createContext(s);function o(t){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function d(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:o(t.components),i.createElement(r.Provider,{value:e},t.children)}}}]);