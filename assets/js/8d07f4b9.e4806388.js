"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6012],{3905:(e,t,n)=>{n.d(t,{kt:()=>h});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),h=c(n),d=i,m=h["".concat(s,".").concat(d)]||h[d]||u[d]||o;return n?r.createElement(m,l(l({ref:t},p),{},{components:n})):r.createElement(m,l({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=p;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a.mdxType="string"==typeof e?e:i,l[1]=a;for(var c=2;c<o;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},93266:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>c,toc:()=>p});var r=n(87462),i=n(63366),o=(n(67294),n(3905)),l=["components"],a={id:"client-asset-tunnelling",title:"Client Asset Tunnelling"},s=void 0,c={unversionedId:"contributing/client-asset-tunnelling",id:"contributing/client-asset-tunnelling",title:"Client Asset Tunnelling",description:"The best way to work on the Dark client is by building it against the production",source:"@site/docs/contributing/client-asset-tunnelling.md",sourceDirName:"contributing",slug:"/contributing/client-asset-tunnelling",permalink:"/contributing/client-asset-tunnelling",draft:!1,editUrl:"https://github.com/darklang/docs/edit/main/docs/contributing/client-asset-tunnelling.md",tags:[],version:"current",frontMatter:{id:"client-asset-tunnelling",title:"Client Asset Tunnelling"},sidebar:"Contributing",previous:{title:"Troubleshooting",permalink:"/contributing/troubleshooting"},next:{title:"Making a Pull Request",permalink:"/contributing/making-a-pull-request"}},u={},p=[{value:"Host the static assets locally",id:"host-the-static-assets-locally",level:2},{value:"Create the tunnel to expose this web server to the internet",id:"create-the-tunnel-to-expose-this-web-server-to-the-internet",level:2},{value:"Register the tunnel in the Editor",id:"register-the-tunnel-in-the-editor",level:2}],h={toc:p};function d(e){var t=e.components,a=(0,i.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The best way to work on the Dark client is by building it against the production\nDark APIs. In the future as we move more part of the editor to be built in Dark,\nit will become the only way to work on the Dark client."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Client asset tunnelling",src:n(88760).Z,width:"2565",height:"971"})),(0,o.kt)("h2",{id:"host-the-static-assets-locally"},"Host the static assets locally"),(0,o.kt)("p",null,"First, you'll need a web server on your machine to host the static assets. The\neditor's build artifacts are hosted in ",(0,o.kt)("inlineCode",{parentName:"p"},"backend/static"),", so you'll need to host\nthat directory. Many tools can be used to accomplish this task - here's how to\ndo this with the ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/static-server"},"static-server"),"\nnpm package."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"cd backend/static")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"npx static-server --cors '*' --port [port]"))),(0,o.kt)("p",null,"You can choose any port available locally, and ",(0,o.kt)("inlineCode",{parentName:"p"},"--cors '*'")," instructs the server\nto include ",(0,o.kt)("inlineCode",{parentName:"p"},"access-control-allow-origin: *")," headers for all requests."),(0,o.kt)("h2",{id:"create-the-tunnel-to-expose-this-web-server-to-the-internet"},"Create the tunnel to expose this web server to the internet"),(0,o.kt)("p",null,"Now, create a tunnel to expose the webserver to the internet."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Install ",(0,o.kt)("a",{parentName:"li",href:"https://ngrok.com"},"ngrok")," on your machine"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ngrok http [port]")," to create the tunnel on the port where your webserver is\nserving the static assets")),(0,o.kt)("p",null,"Alternative tools include ",(0,o.kt)("a",{parentName:"p",href:"https://localtunnel.me"},"localtunnel.me")," and\n",(0,o.kt)("a",{parentName:"p",href:"https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/"},"Cloudflare Tunnel"),"."),(0,o.kt)("h2",{id:"register-the-tunnel-in-the-editor"},"Register the tunnel in the Editor"),(0,o.kt)("p",null,"Finally, use the tunnel in the editor:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Go to Settings (from the icon in the top-right of the editor)"),(0,o.kt)("li",{parentName:"ul"},"Go to the Contributing tab"),(0,o.kt)("li",{parentName:"ul"},"Enter the hostname provided to you by your tunnel"),(0,o.kt)("li",{parentName:"ul"},'Choose to "Use tunneled assets"')),(0,o.kt)("p",null,"This will cause a refresh of the editor, with static assets being served through\nthe tunnel from your local dev environment."))}d.isMDXComponent=!0},88760:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/client-asset-tunnelling-178ec29c63db0b12d242b061cf979f6a.gif"}}]);