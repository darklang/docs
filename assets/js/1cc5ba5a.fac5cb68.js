"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7778],{56010:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var t=n(74848),s=n(28453);const i={id:"custom-domains",title:"How to set up a Custom Domain",sidebar_label:"How to set up a custom domain"},r=void 0,a={id:"how-to/custom-domains",title:"How to set up a Custom Domain",description:"Your backend endpoints are always available at",source:"@site/docs-classic/how-to/custom-domains.md",sourceDirName:"how-to",slug:"/how-to/custom-domains",permalink:"/how-to/custom-domains",draft:!1,unlisted:!1,editUrl:"https://github.com/darklang/docs/edit/main/docs-classic/how-to/custom-domains.md",tags:[],version:"current",frontMatter:{id:"custom-domains",title:"How to set up a Custom Domain",sidebar_label:"How to set up a custom domain"},sidebar:"docs",previous:{title:"How to host Static Assets",permalink:"/how-to/static-assets"},next:{title:"How to work with CORS",permalink:"/how-to/cors"}},c={},d=[{value:"How to set it up",id:"how-to-set-it-up",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"I&#39;ve set up a CNAME but I still don&#39;t see <code>&lt;your_canvas_name&gt;.darkcustomdomain.com</code> in the results from <code>dig</code>!",id:"ive-set-up-a-cname-but-i-still-dont-see-your_canvas_namedarkcustomdomaincom-in-the-results-from-dig",level:3},{value:"My DNS is set up correctly, but I&#39;m getting an invalid certificate warning when trying to visit my custom domain via <code>https</code>",id:"my-dns-is-set-up-correctly-but-im-getting-an-invalid-certificate-warning-when-trying-to-visit-my-custom-domain-via-https",level:3}];function l(e){const o={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.p,{children:["Your backend endpoints are always available at\n",(0,t.jsx)(o.code,{children:"<your_canvas_name>.builtwithdark.com/*"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["If you'd like, you can additionally use a custom domain like\n",(0,t.jsx)(o.code,{children:"www.myawesomedarkservice.com"})," or ",(0,t.jsx)(o.code,{children:"api.myawesomedarkservice.com"})," to serve your\nendpoints!"]}),"\n",(0,t.jsxs)(o.p,{children:["We'll manage SSL for you - no need to buy your own certificate to make your site\nor service available over ",(0,t.jsx)(o.code,{children:"https"}),"."]}),"\n",(0,t.jsx)(o.h2,{id:"how-to-set-it-up",children:"How to set it up"}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:["Set up a ",(0,t.jsx)(o.code,{children:"CNAME"})," record that points from your desired domain to\n",(0,t.jsx)(o.code,{children:"<your_canvas_name>.darkcustomdomain.com"}),". For example, if your canvas is\ncalled ",(0,t.jsx)(o.code,{children:"ellen-demo"}),", point your ",(0,t.jsx)(o.code,{children:"CNAME"})," at ",(0,t.jsx)(o.code,{children:"ellen-demo.darkcustomdomain.com"}),".\nThe specifics for this step depends on how you manage your DNS settings, but\nhere's what it might look like on Cloudflare:"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"Setting a CNAME on Cloudflare",src:n(39354).A+"",width:"2110",height:"630"})}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Note"}),": You ",(0,t.jsx)(o.em,{children:"cannot"})," use an apex domain like ",(0,t.jsx)(o.code,{children:"myawesomedarkservice.com"}),".\nUsing ",(0,t.jsx)(o.code,{children:"www.myawesomedarkservice.com"})," is the usual way, although you can use\n",(0,t.jsx)(o.code,{children:"app"}),", ",(0,t.jsx)(o.code,{children:"api"}),", or another subdomain instead of ",(0,t.jsx)(o.code,{children:"www"}),". This is because apex\n",(0,t.jsx)(o.code,{children:"CNAME"}),"s aren't supported by the DNS spec, and ",(0,t.jsx)(o.code,{children:"A"})," records remove some of our\noptions for providing stable and resilient infrastructure. You can read\n",(0,t.jsx)(o.a,{href:"https://www.netlify.com/blog/2017/02/28/to-www-or-not-www/",children:"this Netlify post"}),"\nfor more information."]}),"\n",(0,t.jsxs)(o.p,{children:["If you wish, you can additionally set up an ",(0,t.jsx)(o.code,{children:"A"})," record pointing the apex\n(e.g. ",(0,t.jsx)(o.code,{children:"myawesomedarkservice.com"}),") to ",(0,t.jsx)(o.code,{children:"35.227.208.117"}),". We cannot currently\nprovide an SSL cert for that, but we can redirect to your main subdomain\n(which is usually ",(0,t.jsx)(o.code,{children:"www"}),"). If your DNS provider supports ",(0,t.jsx)(o.code,{children:"ALIAS"})," records (like\n",(0,t.jsx)(o.code,{children:"CNAME"}),", but permitted on an apex), that also works - though again, for\nredirects, not SSL certs."]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:["Double-check that DNS has resolved. One way to test this is with the ",(0,t.jsx)(o.code,{children:"dig"}),"\ntool on the command line. If everything is ready, you should see something\nlike this:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:" $dig api.myawesomedarkservice.com\n # ...\n ;; ANSWER SECTION:\n api.myawesomedarkservice.com.    300    IN    CNAME    ellen-demo.darkcustomdomain.com.\n ellen-demo.darkcustomdomain.com. 300 IN A 35.197.124.122\n # ...\n"})}),"\n",(0,t.jsxs)(o.p,{children:["Another way to check is with a service like\n",(0,t.jsx)(o.a,{href:"https://dnschecker.org/",children:"https://dnschecker.org/"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:["Once DNS resolves, ",(0,t.jsx)(o.a,{href:"/reference/support",children:"contact us"})," with your domain and\ncanvas, and we'll set up an SSL cert and the appropriate redirects from\n",(0,t.jsx)(o.code,{children:"http"})," to ",(0,t.jsx)(o.code,{children:"https"})," on our end."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(o.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(o.h3,{id:"ive-set-up-a-cname-but-i-still-dont-see-your_canvas_namedarkcustomdomaincom-in-the-results-from-dig",children:["I've set up a CNAME but I still don't see ",(0,t.jsx)(o.code,{children:"<your_canvas_name>.darkcustomdomain.com"})," in the results from ",(0,t.jsx)(o.code,{children:"dig"}),"!"]}),"\n",(0,t.jsx)(o.p,{children:"We've seen this happen for develops using proxies like Cloudflare in front of\ntheir domains. For example, you might see:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:"$ dig api.myawesomedarkservice.com\n# ...\n;; ANSWER SECTION:\napi.myawesomedarkservice.com.    300    IN    A    104.24.118.127\napi.myawesomedarkservice.com.    300    IN    A    104.24.119.127\n# ...\n"})}),"\n",(0,t.jsxs)(o.p,{children:['To resolve this, turn off the proxy. On Cloudflare, you can press this button to\nswitch from "Proxied" to "DNS only" mode:\n',(0,t.jsx)(o.img,{alt:"Turning off the Cloudflare proxy in favor of &quot;DNS only&quot;",src:n(48167).A+"",width:"2086",height:"492"})]}),"\n",(0,t.jsxs)(o.h3,{id:"my-dns-is-set-up-correctly-but-im-getting-an-invalid-certificate-warning-when-trying-to-visit-my-custom-domain-via-https",children:["My DNS is set up correctly, but I'm getting an invalid certificate warning when trying to visit my custom domain via ",(0,t.jsx)(o.code,{children:"https"})]}),"\n",(0,t.jsxs)(o.p,{children:["If this happens we likely haven't set up an SSL certificate for you yet (see\nstep 3 above). In any case, please ",(0,t.jsx)(o.a,{href:"/reference/support",children:"contact us"})," with your\ndomain and canvas."]})]})}function h(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},48167:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/cloudflare-proxy-a23497061d4f2d17ff7ae4051b1f3bdd.png"},39354:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/cname-example-2f957d26fad36f17c2a324c89da878df.png"},28453:(e,o,n)=>{n.d(o,{R:()=>r,x:()=>a});var t=n(96540);const s={},i=t.createContext(s);function r(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);