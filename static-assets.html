<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml">
<link rel="preconnect" href="https://cdn.heapanalytics.com">
<link rel="dns-prefetch" href="https://cdn.heapanalytics.com">
<script>window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])},heap.load(477722926)</script>
<link rel="preconnect" href="https://cdn.heysavvy.com">
<link rel="dns-prefetch" href="https://cdn.heysavvy.com"><title data-react-helmet="true">Host Static Assets | Dark Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/static-assets"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Host Static Assets | Dark Documentation"><meta data-react-helmet="true" name="description" content="Dark supports hosting your static assets."><meta data-react-helmet="true" property="og:description" content="Dark supports hosting your static assets."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/static-assets"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/static-assets" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/static-assets" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://QFOZBC0VVL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e5ea1f16.css">
<link rel="preload" href="/assets/js/runtime~main.1f3903eb.js" as="script">
<link rel="preload" href="/assets/js/main.011e6101.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Dark</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Language</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">How to</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/static-assets">Host Static Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/custom-domains">Use a Custom Domain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cors">CORS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/teamwork">Work with your team</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-flags">Use Feature Flags</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/writing-tests">Write Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/external-infra">Connect to External Infrastructure</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Host Static Assets</h1></header><p>Dark supports hosting your static assets.</p><p>Our static assets service is designed to be simple, easy to understand, as well
as composable and configurable. As such, a static assets deploy uploads your
assets to our cloud CDN, and we provide powerful tools in Dark to serve and
configure them.</p><p>A
<a href="https://github.com/marketplace/actions/upload-static-assets-to-dark-canvas" target="_blank" rel="noopener noreferrer">GitHub Action</a>
to automate this process is now available thanks to one of our fantastic
community members, Greg Brimble!</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="simple-use-case">Simple Use Case<a aria-hidden="true" class="hash-link" href="#simple-use-case" title="Direct link to heading">â€‹</a></h2><p><em>Note: You can see the finished product at
<a href="https://darklang.com/a/sample-static-assets" target="_blank" rel="noopener noreferrer">https://darklang.com/a/sample-static-assets</a></em></p><p>We have a single page app, written in react. It talks to our API, written in
Dark. Now weâ€™d like to deploy that app so that customers can use it too. This
also works in a similar way for Vue applications, with a few caveats called out
in line.</p><p>Hereâ€™s how we want our app to work:</p><ul><li>we have an API, served from <code>/api/</code></li><li><code>/</code> serves our <code>index.html</code> page from our assets</li><li><code>index.html</code> should point to our static assets host to fetch other assets</li></ul><p><strong>Weâ€™ll focus on the last two things we want our app to do in this document.</strong></p><p>At a high level, here are the steps:</p><ol><li>deploy the assets using the dark-cli app</li><li>load the index page</li><li>configure your react app</li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="deploying-assets">Deploying Assets<a aria-hidden="true" class="hash-link" href="#deploying-assets" title="Direct link to heading">â€‹</a></h2><p>We have a command-line app to allow you to deploy your assets.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="installation">Installation<a aria-hidden="true" class="hash-link" href="#installation" title="Direct link to heading">â€‹</a></h3><ol><li><p>Go to
<a href="https://dark-cli.storage.googleapis.com/index.html" target="_blank" rel="noopener noreferrer">https://dark-cli.storage.googleapis.com/index.html</a>,
and download the appropriate binary for macOS, Windows, or Linux.</p></li><li><p>On macOS or Linux,</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x dark-cli-apple</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>or</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x dark-cli-linux</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>to make it executable.</p></li><li><p>To confirm it works, run it with <code>-â€”help</code>:</p><p>macOS:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple --help</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Linux:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-linux --help</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Windows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli.exe --help</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>On some versions of macOS, you may get one of the the following popups:</p><p><img alt="Not downloaded from the app store popup" src="/assets/images/macos-popup1-ba4ccd3405f2bdb18c30a6946442d4f5.png"></p><p><img alt="Developer cannot be verified popup" src="/assets/images/macos-popup2-af313e1a00f130745cda7bf4262e33f8.png"></p><p>to resolve this, press <code>Ok</code> or <code>Cancel</code> and open
<code>System Preferences -&gt; Security &amp; Privacy -&gt; General</code>.</p><p><img alt="System Preferences -&amp;gt; Security &amp;amp; Privacy -&amp;gt; General -&amp;gt; Allow Anyway" src="/assets/images/macos-allow-f2da8f4cd07ce38b10610a76c7252db0.png"></p><p>Press <code>Allow Anyway</code> and repeat step 3.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_31ik" id="configure-your-client">Configure your client<a aria-hidden="true" class="hash-link" href="#configure-your-client" title="Direct link to heading">â€‹</a></h3><p>At the moment, our CDN does not support the use of absolute URLs in the
generated files. For example, if your CSS file links an image at
<code>/static/myimage.png</code>, that file will not load. You need to use relative URLs
instead, in this case <code>./myimage.png</code>.</p><p>Your <code>index.html</code> likely loads other assets, such as <code>app.css</code> or <code>app.js</code>. For
speed, you will load these directly from the Dark CDN, not via your Dark
handler. As such, weâ€™ll need to make some edits to your assets to ensure theyâ€™re
always pointing at the CDN for other assets.</p><p>During the deployment of the assets, our backend replaces the string
<code>DARK_STATIC_ASSETS_BASE_URL</code> in all of your assets with the actual URL of this
deployment.</p><p>When not using a framework, prefix asset paths with Dark&#x27;s magic string, for
example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">img</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">DARK_STATIC_ASSETS_BASE_URL/logo.svg</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In React, when compiling your react application, you can use <code>PUBLIC_URL</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PUBLIC_URL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DARK_STATIC_ASSETS_BASE_URL </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If using Angular, you can run the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ng build --prod --deploy-url DARK_STATIC_ASSETS_BASE_URL/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If using Vue, you likely want to set <code>PUBLIC_PATH</code> instead:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PUBLIC_PATH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DARK_STATIC_ASSETS_BASE_URL</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Additionally, Vue assumes relative paths. If you are having an issue with your
assets, check to make sure that <code>index.html</code> has not added leading path notation
(<code>/PUBLIC_PATH</code>). If it has, you can manually remove and redeploy. More on using
this for Vue here:</p><p><a href="https://github.com/vuejs/vue-cli/tree/dev/docs/config#publicpath" target="_blank" rel="noopener noreferrer">vuejs/vue-cli</a></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="deploy">Deploy<a aria-hidden="true" class="hash-link" href="#deploy" title="Direct link to heading">â€‹</a></h3><ol><li><p>To deploy, select the directory you want to upload. In this case, weâ€™ll use
Reactâ€™s default directory <code>build</code>.</p></li><li><p>Run:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The single quotes - around mypass help protect against shell escaping and interpolation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If your password contains a single quote or a backslash don&#x27;t forget to escape it with a \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple --canvas myusername-mycanvas --password </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mypass&#x27;</span><span class="token plain"> --user myusername build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ol><p>(If you want to avoid shell escaping issues entirely, we also support putting
your creds in <code>~/.netrc</code>; the format for that is documented at
<a href="https://ec.haxx.se/usingcurl/usingcurl-netrc" target="_blank" rel="noopener noreferrer">https://ec.haxx.se/usingcurl/usingcurl-netrc</a>
for machine <code>darklang.com</code>).</p><p>On success, weâ€™ll show you the deploy hash, a URL, and a long URL. These are
where your static assets now live! You can see your static assets in the Routing
table in your canvas:</p><p><img alt="ticassets/image1.png" src="/assets/images/image1-e708b4d9886a41df524a6461418504ec.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="set-up-your-app-to-load-your-assets">Set up your App to Load your Assets<a aria-hidden="true" class="hash-link" href="#set-up-your-app-to-load-your-assets" title="Direct link to heading">â€‹</a></h2><p>If your SPA framework generates an <code>index.html</code>, or you write one yourself, you
can load that for the <code>/</code> route in Dark.</p><ul><li>Add a handler for <code>/</code> to load your <code>index.html</code> page using
<code>StaticAssets::serveLatest &quot;index.html&quot;</code>.</li><li>If youâ€™re using client-side routing, you can also add a handler serving
<code>index.html</code> for <code>/:rest</code> which will be a catch-all handler for any URL
(besides <code>/</code>) that doesnâ€™t have another handler defined for it. This will
allow your users to load your assets from any of your appâ€™s URLs.</li></ul><p>You can copy and paste this example from
<a href="https://darklang.com/a/sample-static-assets" target="_blank" rel="noopener noreferrer">https://darklang.com/a/sample-static-assets</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="implementing-a-fallback-in-the-case-of-a-404">Implementing a Fallback in the Case of a 404<a aria-hidden="true" class="hash-link" href="#implementing-a-fallback-in-the-case-of-a-404" title="Direct link to heading">â€‹</a></h2><p>If youâ€™re looking to serve a fallback asset, you can use a match statement:</p><p><img alt="ticassets/image2.png" src="/assets/images/image2-ebd1ec60f75253503cdfe34b84f07fb4.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="advanced-feature-flags-and-continuous-delivery">Advanced: Feature Flags and Continuous Delivery<a aria-hidden="true" class="hash-link" href="#advanced-feature-flags-and-continuous-delivery" title="Direct link to heading">â€‹</a></h2><p>Weâ€™ve shown you how to deploy new assets that appear immediately. However, you
often want to control the rollout of those assets, perhaps seeing them yourself,
or only showing them to users who have opted into beta features. As a result, it
is easy to use Dark Static Assets with feature flags.</p><p>Instead of calling <code>HttpClient::serveLatest</code>, you can call <code>HttpClient::serve</code>,
and use the deploy hash from your command line.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="reference">Reference<a aria-hidden="true" class="hash-link" href="#reference" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="functions">Functions<a aria-hidden="true" class="hash-link" href="#functions" title="Direct link to heading">â€‹</a></h3><ul><li><code>urlFor &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the given <code>deployHash</code>:</li><li><code>StaticAssets::urlFor &quot;o6vs1aqcbx&quot; &quot;foo.html&quot;</code> -&gt;
<code>&quot;https://ismith-staticassets.darksa.com/stgbcg3kez_zb9-wlbtgta563t8/o6vs1aqcbx/foo.html&quot;</code></li></ul></li><li><code>urlForLatest &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the latest deploy:</li><li><code>StaticAssets::urlForLatest &quot;foo.html&quot;</code> -&gt;
<code>&quot;https://ismith-staticassets.darksa.com/stgbcg3kez_zb9-wlbtgta563t8/o6vs1aqcbx/foo.html&quot;</code></li></ul></li><li><code>fetch &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns the contents of a file for the current canvas and the given
<code>deployHash</code>:</li><li><code>StaticAssets::fetch &quot;o6vs1aqcbx&quot; &quot;foo.html&quot;</code> -&gt;
<code>&quot;&lt;html&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;&quot;</code></li></ul></li><li><code>fetchLatest &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the latest deploy:</li><li><code>StaticAssets::fetchLatest &quot;foo.html&quot;</code> -&gt;
<code>&quot;&lt;html&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;&quot;</code></li></ul></li><li><code>serve &lt;deployHash : String&gt; &lt;file : String&gt; -&gt; String</code><ul><li>Returns the contents of a file for the current canvas and the given
<code>deployHash</code>:</li><li><code>StaticAssets::serve &quot;o6vs1aqcbx&quot; &quot;foo.html&quot;</code> -&gt; responds with the file
<code>foo.html</code> and the headers that the static assets CDN provided</li></ul></li><li><code>serveLatest &lt;file : String&gt; -&gt; String</code><ul><li>Returns a URL to a file for the current canvas and the latest deploy:</li><li><code>StaticAssets::serveLatest &quot;foo.html&quot;</code> -&gt; responds with the file <code>foo.html</code>
and the headers that the static assets CDN provided</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="command-line-reference">Command line reference<a aria-hidden="true" class="hash-link" href="#command-line-reference" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">error: The following required arguments were not provided:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">paths</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --canvas </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">canvas</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --password </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --user </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">user</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">USAGE:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dark-cli-apple </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">FLAGS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">paths</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --canvas </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">canvas</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --password </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --user </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">user</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/darklang/docs/edit/main/docs/static-assets.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/http"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->HTTP Responses</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/custom-domains"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Use a Custom Domain<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#simple-use-case" class="table-of-contents__link toc-highlight">Simple Use Case</a></li><li><a href="#deploying-assets" class="table-of-contents__link toc-highlight">Deploying Assets</a><ul><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#configure-your-client" class="table-of-contents__link toc-highlight">Configure your client</a></li><li><a href="#deploy" class="table-of-contents__link toc-highlight">Deploy</a></li></ul></li><li><a href="#set-up-your-app-to-load-your-assets" class="table-of-contents__link toc-highlight">Set up your App to Load your Assets</a></li><li><a href="#implementing-a-fallback-in-the-case-of-a-404" class="table-of-contents__link toc-highlight">Implementing a Fallback in the Case of a 404</a></li><li><a href="#advanced-feature-flags-and-continuous-delivery" class="table-of-contents__link toc-highlight">Advanced: Feature Flags and Continuous Delivery</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a><ul><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#command-line-reference" class="table-of-contents__link toc-highlight">Command line reference</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learning</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item">Building Slack Apps</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Blog</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Corp Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1f3903eb.js"></script>
<script src="/assets/js/main.011e6101.js"></script>
<script async="true" defer="true" src="https://cdn.heysavvy.com/wc/savvy.min.js"></script>
        <savvy-smart-form id="6HBmUjmI12nCuopyvB0B"></savvy-smart-form></body>
</html>