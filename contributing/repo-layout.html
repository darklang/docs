<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml">
<link rel="preconnect" href="https://cdn.heapanalytics.com">
<link rel="dns-prefetch" href="https://cdn.heapanalytics.com">
<script>window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])},heap.load(477722926)</script>
<link rel="preconnect" href="https://cdn.heysavvy.com">
<link rel="dns-prefetch" href="https://cdn.heysavvy.com"><title data-react-helmet="true">Repository directory structure | Dark Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/contributing/repo-layout"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Repository directory structure | Dark Documentation"><meta data-react-helmet="true" name="description" content="The Dark repo contains multiple services and compilation targets. For OCaml,"><meta data-react-helmet="true" property="og:description" content="The Dark repo contains multiple services and compilation targets. For OCaml,"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/contributing/repo-layout"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/contributing/repo-layout" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/contributing/repo-layout" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://QFOZBC0VVL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.20cdfa30.css">
<link rel="preload" href="/assets/js/runtime~main.0f359128.js" as="script">
<link rel="preload" href="/assets/js/main.d04048ec.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Dark</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/first-dark-application">Tutorial</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/contributing/getting-started">Your First Contribution</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/contributing/next-contribution">Your Next Contributions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/contributing/rescript-and-fsharp-for-dark-developers">Working in the Dark repo</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/rescript-and-fsharp-for-dark-developers">ReScript and F# for Dark developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/general-concepts">General concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/tour-of-editor">A tour of the Editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/tour-of-backend">A tour of the Backend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contributing/repo-layout">Repository directory structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/making-a-pull-request">Making a Pull Request</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Repository directory structure</h1></header><p>The Dark repo contains multiple services and compilation targets. For OCaml,
here&#x27;s how the various directories intersect, and what language they use:</p><p><img alt="Compilation targets and their respective directories" src="/assets/images/compilation-targets-ba178cf9f6d68148063e5049f33d52d9.png" width="812" height="800"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="directory-listing">Directory listing<a class="hash-link" href="#directory-listing" title="Direct link to heading">â€‹</a></h2><ul><li><code>.circleci</code> - CI config file</li><li><code>.ionide</code> - config for F# VsCode plugin</li><li><code>.vscode</code> - VsCode config</li><li><code>auth0-branding</code> - has some assets for our login provider</li><li><code>_build</code> - build dir for OCaml (empty, this is a docker volume)</li><li><code>_esy</code> build dir for OCaml (empty, this is a docker volume)</li><li><code>backend</code> - this is the old backend, written in OCaml (the new backend is in
fsharp-backend), including the language definition and execution engine, the
&quot;framework&quot; (HTTP, DB, queues, etc), the editor&#x27;s HTTP API, and the execution
engine which runs in the client (compiled to JS from OCaml)<ul><li><code>bin</code> - &quot;main&quot; files for executables</li><li><code>jsanalysis</code> - &quot;main&quot; file for client-side analysis/execution-engine</li><li><code>libbackend</code> - the main HTTP server, and framework functionality (HTTP, DB,
queues)</li><li><code>libcommon</code> - some utilities shared between JS- and OCaml-compiled versions
of backend</li><li><code>libexecution</code> - the Dark language, including types, the runtime, most of
the standard library, and of course the execution engine</li><li><code>liblegacy</code> - libraries to help the F# backend reuse OCaml code</li><li><code>libserialization</code> - binary serialization for Dark types</li><li><code>libservice</code> - library with some common functionality for OCaml services
(backend, queues, cron)</li><li><code>libtarget</code> - library to support certain functions in native and JS modes.
Interface only.</li><li><code>libtarget.js</code> - JS implementation of <code>libtarget</code></li><li><code>libtarget.ocaml</code> - OCaml implementation of <code>libtarget</code></li><li><code>libunshared</code> - platform specific (native) version of <code>libunshared</code>, which
is used to provide types to <code>libshared</code></li><li><code>migrations</code> - SQL for migrations</li><li><code>node_modules</code> - installation dir for Esy (package manager-ish thing for
OCaml)</li><li><code>serialization</code> - definition of a binary serialization format we use to
store Dark programs</li><li><code>static</code> - static HTTP assets (icons, fonts, etc)</li><li><code>swagger</code> - deprecated old functionality</li><li><code>templates</code> - where the single editor HTML template is stored</li><li><code>test</code> - all backend unit tests</li><li><code>test_appdata</code> - serialized mocked data for integration tests</li></ul></li><li><code>client</code> - the editor, and the entire frontend application that is found under
<a href="http://darklang.com/a/yourcanvas" target="_blank" rel="noopener noreferrer">darklang.com/a/yourcanvas</a> (note, not
darklang.com or the docs). Written in Bucklescript/ReasonML. All frontend
functionality, except the server-side APIs used for it, are here<ul><li><code>src/analysis</code> - handles code related to live values - requesting from the
server, storing, sending to the client-side execution engine</li><li><code>src/api</code> - most requests to the HTTP API live here</li><li><code>src/app</code> - important scaffolding for the application (settings, exception
tracking, <code>Main.ml</code>)</li><li><code>src/canvas</code> - misc files pertaining to layout</li><li><code>src/components</code> - a number of parts of Dark have been componentized. They
live here.</li><li><code>src/core</code> - all the frontend types are defined here, also JSON encoders and
decoders for them</li><li><code>src/fluid</code> - fluid is the &quot;editing&quot; portion of the editor, the thing you
type code in. All editing of Dark code happens in here</li><li><code>src/forms</code> - the &quot;forms&quot; editor, used for editing any form-like boxes (HTTP
handler headings, DB fields, etc). Still recovering from when it was also
how we wrote Dark code</li><li><code>src/package</code> -the Dark package manager</li><li><code>src/prelude</code> - builtin functions that are available in most other files
(which start with <code>open Prelude</code>)</li><li><code>src/toplevels</code> - HTTP handler, workers, REPLs, DBs, functions, etc, are all
&quot;toplevels&quot;</li><li><code>src/util</code> - generic utility code</li><li><code>static</code> - some assets</li><li><code>styles</code> - CSS</li><li><code>test</code> - unit tests</li><li><code>workers</code> - web workers used for analysis and fetching data from the server
in the background</li></ul></li><li><code>config</code> - a set of env vars for each environment. You&#x27;ll be interested in the
<code>dev</code> environment</li><li><code>docs</code> - sporadic documentation</li><li><code>docs/production</code> - documentation about how we run the Dark service</li><li><code>fsharp-backend</code> - The new backend written in F# and .NET. including the
language definition and execution engine, the &quot;framework&quot; (HTTP, DB, queues,
etc), the editor&#x27;s HTTP API, and the execution engine which runs in the
client.<ul><li><code>.paket</code> - Used by the paket/nuget package manager</li><li><code>Build</code> - where the compiler puts compiled code. This is inside the</li><li><code>paket-files</code> - Used by the paket/nuget package manager</li><li><code>src/ApiServer</code> - webserver serving the editor and the API used by the
editor</li><li><code>src/BackendOnlyStdLib</code> - impl. of functions which need to be run on the
backend, due to their connection to the DB, queues, etc.</li><li><code>src/Benchmark</code> - a benchmark executable to measure the performance of Dark
code</li><li><code>src/BwdServer</code> - webserver that is grand-user facing (at builtwithdark.com)</li><li><code>src/CronChecker</code> - trigger events for scheduled work</li><li><code>src/LibBackend</code> - the framework functionality (HTTP, DB, queues, traces,
secrets, serialization), including standard library functions which only run
on the backend (and not in the client)</li><li><code>src/LibExecution</code> - the Dark language, including types, the runtime, and of
course the execution engine</li><li><code>src/LibExecutionStdLib</code> - most of the standard library functions (anything
that doesn&#x27;t <em>need</em> to be run on the backend)</li><li><code>src/LibService</code> - library with some common functionality for F# services
(currently just the backend, soon queues and cron)</li><li><code>src/Prelude</code> - utilities, libraries, common types; used everywhere</li><li><code>src/QueueWorker</code> - pulls user events from the queue and runs them</li><li><code>src/Scripts</code> - some simple command-line programs that use F# libraries</li><li><code>src/Tablecloth</code> - a standard library which matches the one we use in OCaml
and bucklescript.</li><li><code>src/Wasm</code> - &quot;main&quot; file for client-side analysis/execution-engine</li><li><code>tests/FuzzTests</code> - code to fuzztest different parts of Dark</li><li><code>tests/TestUtils</code> - utilities used in Tests and FuzzTests</li><li><code>tests/Tests</code> - mostly unit tests for backend and libexecution functionality</li><li><code>tests/testfiles</code> - unit test definitions for language and standard library</li><li><code>tests/httptestfiles</code> - tests for the Dark HTTP server and middleware</li><li><code>tests/httpclienttestfiles</code> - tests for the HTTP Library functions</li></ul></li><li><code>integration-tests</code> - integration tests, written in JS using TestCafe. Flaky
and brittle. Help welcome!</li><li><code>lib</code> - build directory used by Bucklescript</li><li><code>libshared</code> - a small set of types that are shared between the old backend and
client. This will be merged into the client once the old backend is removed.</li><li><code>node_modules</code> - installation dir for <code>npm</code></li><li><code>postgres-honeytail</code> - a backend service used to send Postgres logs to
Honeycomb (our observability vendor). The only Go in our repo.</li><li><code>queue-scheduler</code> - a Rust backend service that runs our queues.</li><li><code>rundir</code> - anything that runs and stores something stores it here<ul><li><code>integration_test_logs</code></li><li><code>logs</code> - logs from running services, especially <code>fsharp-bwdserver.log</code> and
<code>fsharp-apiserver.log</code> (backend)</li><li><code>screenshots</code> - for integration tests</li><li><code>videos</code> - for integration tests</li></ul></li><li><code>scripts</code> - bash scripts to do common (and sometimes uncommon and therefore
forgettable) actions on the repo. Using scripts is very very common. Anytime
there&#x27;s something interesting, we add a script to do it. Scripts are
occasionally out of date.</li><li><code>stroller</code> - a Rust backend service that sits next to our OCaml backend. It
will be phased out along with the OCaml backend. When the OCaml backend sends
data to Pusher (websockets vendor) or Rollbar (exception tracking), it sends
it to Stroller to send to the vendor instead. This allows execution to
continue running immediately (our backend does not have efficient concurrency,
so this is a hack to allow it)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/darklang/docs/edit/main/docs/contributing/repo-layout.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/contributing/tour-of-backend"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">A tour of the Backend</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/contributing/glossary"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Glossary</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#directory-listing" class="table-of-contents__link toc-highlight">Directory listing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learning</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/first-dark-application">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/category/walk-throughs">Walk-throughs</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li><li class="footer__item"><a class="footer__link-item" href="/reference/changelog">Changelog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0f359128.js"></script>
<script src="/assets/js/main.d04048ec.js"></script>
<script async="true" defer="true" src="https://cdn.heysavvy.com/wc/savvy.min.js"></script>
        <savvy-smart-form id="6HBmUjmI12nCuopyvB0B"></savvy-smart-form></body>
</html>