<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml">
<link rel="preconnect" href="https://cdn.heapanalytics.com">
<link rel="dns-prefetch" href="https://cdn.heapanalytics.com">
<script>window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])},heap.load(477722926)</script>
<link rel="preconnect" href="https://cdn.heysavvy.com">
<link rel="dns-prefetch" href="https://cdn.heysavvy.com"><title data-react-helmet="true">ReScript and F# for Dark developers | Dark Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/contributing/rescript-and-fsharp-for-dark-developers"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ReScript and F# for Dark developers | Dark Documentation"><meta data-react-helmet="true" name="description" content="This guide aims to introduce you to enough F#/ReScript to contribute to Dark,"><meta data-react-helmet="true" property="og:description" content="This guide aims to introduce you to enough F#/ReScript to contribute to Dark,"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/contributing/rescript-and-fsharp-for-dark-developers"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/contributing/rescript-and-fsharp-for-dark-developers" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/contributing/rescript-and-fsharp-for-dark-developers" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://QFOZBC0VVL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e5ea1f16.css">
<link rel="preload" href="/assets/js/runtime~main.1f3903eb.js" as="script">
<link rel="preload" href="/assets/js/main.4e7d1b57.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Dark</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Your First Contribution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Your Next Contributions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Working in the Dark repo</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contributing/rescript-and-fsharp-for-dark-developers">ReScript and F# for Dark developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/general-concepts">General concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/tour-of-editor">A tour of the Editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/tour-of-backend">A tour of the Backend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/repo-layout">Repository directory structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contributing/making-a-pull-request">Making a Pull Request</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ReScript and F# for Dark developers</h1></header><p>This guide aims to introduce you to enough F#/ReScript to contribute to Dark,
assuming you already know Dark. F# and ReScript are very similar languages,
both derived from OCaml. We currently use ReScript for the client. We use F#
for the backend, which is very similar to Dark as well.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="some-simple-frescript-code">Some simple F#/ReScript code<a aria-hidden="true" class="hash-link" href="#some-simple-frescript-code" title="Direct link to heading">â€‹</a></h2><p>Dark and F# and ReScript are very similar. Here&#x27;s an example function in F#:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> someFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">intArgument </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;myString&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> anInt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">65</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> intArgument</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aFloat </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6.72</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  anotherFunction aString anInt aFloat</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is a function called <code>someFunction</code>, which takes one argument, an <code>int</code>
called <code>intArgument</code>, and returns a <code>string</code>. Three variables are defined in the
body, first a string, then an int, then a float, and finally we call the
<code>anotherFunction</code> function with all three parameters as arguments.</p><p>In Dark this would be written:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">someFunction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  intArgument </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  â†ª </span><span class="token module variable" style="color:rgb(191, 199, 213)">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;myString&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> anInt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">65</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> intArgument</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aFloat </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6.72</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">anotherFunction aString anInt aFloat</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In ReScript this would be written:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> someFunction </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">intArgument</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;myString&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> anInt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">65</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> intArgument </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aFloat </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6.72</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  anotherFunction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> anInt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> aFloat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you can see, the syntaxes are very similar.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="dark-vs-rescript-vs-f">Dark vs ReScript vs F#<a aria-hidden="true" class="hash-link" href="#dark-vs-rescript-vs-f" title="Direct link to heading">â€‹</a></h2><p>Dark, ReScript, and F# are all influenced by OCaml. Though Dark is currently a
subset of these languages, Dark will continue to grow some more of their
features. We&#x27;ll discuss the similarities and differences as we go through
language features.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="types">Types<a aria-hidden="true" class="hash-link" href="#types" title="Direct link to heading">â€‹</a></h3><p>ReScript/F# are strongly typed-languages. Dark aspires to be, but it doesn&#x27;t
have a type-checker yet. This shows the biggest difference in between working in
these languages, that the compiler will refuse to compile if the types are
wrong.</p><p>ReScript/F# have type-inference, which means that the compiler will try and
figure out what the types are. This is frequently the source of bad compiler
messages, often it will tell you something which seems wrong because it guessed
wrong about certain types.</p><p>Usually type errors actually contain useful information, but they need to be
read very carefully to find it.</p><p>We&#x27;ve found the best way to debug incorrect types is to add type annotations to
everything. We add them to all functions (we didn&#x27;t always do this, but we do
now, but we are now), including all parameters and return types (see
<a href="#functions">example</a> below).</p><p>In F#, you can actually add types in many places where they aren&#x27;t required, such as
variable definitions:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>x</code> here, despite being a normal variable definition, has a type signature.  F#
and ReScript allow this in many places, and it&#x27;s useful for tracking down these
errors.</p><p>We&#x27;ll discuss declaring types below.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="functions">Functions<a aria-hidden="true" class="hash-link" href="#functions" title="Direct link to heading">â€‹</a></h3><p>Functions in ReScript and F# are defined in the outer scope. Type signatures are
optional but we always use them:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arg1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arg2 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> arg1 </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token module variable" style="color:rgb(191, 199, 213)">String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">toInt arg2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;just return a string&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> arg2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here, <code>myFunction</code> has two arguments, <code>arg1</code> and <code>arg2</code>, which are an <code>int</code> and
<code>string</code> respectively. It returns a <code>string</code>.</p><p>Like in Dark, the body of a function is just an expression, and it automatically
returns the result of that expression.</p><p>(see <a href="#advanced-functions">below</a> for more details on functions in OCaml)</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="standard-library">Standard library<a aria-hidden="true" class="hash-link" href="#standard-library" title="Direct link to heading">â€‹</a></h3><p>Most of the code in Dark uses
<a href="https://github.com/darklang/tablecloth" target="_blank" rel="noopener noreferrer">Tablecloth</a>, which has the same
<a href="https://github.com/darklang/tablecloth/blob/master/bucklescript/src/tablecloth.ml" target="_blank" rel="noopener noreferrer">interface</a>
for ReScript and F#.</p><p>Note: for implementing the standard libraries, we do not use Tablecloth as it is
still pretty new and may be in flux. Instead, we try to make sure that we use
libraries from <code>.NET</code>, FSharp.Core, or if necessary, the FSharpPlus library.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="int">Int<a aria-hidden="true" class="hash-link" href="#int" title="Direct link to heading">â€‹</a></h3><p>An <code>int</code> is the same in Dark and F#, same syntax, same meaning. Note that
ints are 31 bits in ReScript, 32 bits in F#, and 64bit in Dark.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="float">Float<a aria-hidden="true" class="hash-link" href="#float" title="Direct link to heading">â€‹</a></h3><p>A <code>float</code> is the same in Dark, ReScript, and F#, both of them are 64-bit
floating point numbers.</p><p>Like in Dark, there are special operators to work on floats in ReScript.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">+.</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To convert from floats to ints use <code>Float.toInt</code>, or <code>Float.round</code>.</p><p>In F#, standard operators work on floats too.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">+.</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="bool">Bool<a aria-hidden="true" class="hash-link" href="#bool" title="Direct link to heading">â€‹</a></h3><p>Like in Dark, <code>bool</code>s in F# and ReScript are either <code>true</code> or <code>false</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="string">String<a aria-hidden="true" class="hash-link" href="#string" title="Direct link to heading">â€‹</a></h3><p>Strings are Unicode in Dark, ReScript and F#. While you&#x27;re unlikely to hit
differences in practice, they do actually use a different in-memory
representation, with Dark using UTF-8, ReScript using the browser&#x27;s built-in
UCS-2, and F# using .NET&#x27;s UTF-16 (which is very similar but not quite the same
as UCS-2).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;some string, escaping is allowed\nwhich dark doesn&#x27;t support yet&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">myString</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="string-interpolation">String Interpolation<a aria-hidden="true" class="hash-link" href="#string-interpolation" title="Direct link to heading">â€‹</a></h3><p>Both ReScript and F# support string interpolation. In F#:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7.8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">$</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;some string with x: {x} and also {y}&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In ReScript:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7.8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">j</span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">some string </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">$</span><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">and</span><span class="token plain"> also </span><span class="token operator" style="color:rgb(137, 221, 255)">$</span><span class="token plain">y</span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Dark does not currently support String interpolation.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="list">List<a aria-hidden="true" class="hash-link" href="#list" title="Direct link to heading">â€‹</a></h3><p>Lists in Dark, F# and ReScript are almost the same. In F#, lists
use <code>;</code> as separators, like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If ReScript, the syntax is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>(However, F# allows separators to be omitted which the list elements are lined
up vertically, as it uses indentation as the separator).</p><p>While Dark technically allows you to create lists that have different types in
them (which you should not do), ReScript and F# emphatically do not.</p><p>To type check a list in ReScript, you specify its type like so: <code>int list</code>,
which is a list of ints. In F#, you use <code>List&lt;int&gt;</code> (though <code>int list</code> is still
allowed).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="records">Records<a aria-hidden="true" class="hash-link" href="#records" title="Direct link to heading">â€‹</a></h3><p>Records are mostly used as objects are in most languages. Like Dark, they only
have fields, not methods, and you use functions to manipulate them.</p><p>A record in ReScript will look quite familiar:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> field1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  field2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  field3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;asd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>F# uses a similar syntax, but with <code>=</code> instead of <code>:</code>, though it allows you to
use indentation instead of separators:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  field1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  field2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  field3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;asd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that they use <code>=</code> to connect a field and a value, and <code>;</code> as row separator.
The types of the fields do not have to be declared.</p><p>Records are immutable, like almost everything in ReScript/F#, and are updated
using unusual syntaxes:</p><p>In ReScript:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> field1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> field2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> updatedX </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> field1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">57</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">doSomethingWith</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">updatedX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In F#:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> field1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> field2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> updatedX </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> x </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> field1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">57</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">doSomethingWith updatedX</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that records in Dark are really dictionaries, which is why you update them
with <code>Dict::set</code>. We&#x27;re trying to figure out how to split records and
dictionaries apart better in Dark, after which they will be more like
ReScript/F# (though hopefully with better syntax).</p><p>Type definitions for records look like this in F#:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Person</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> age </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>and like this in ReScript:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> person </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="let">Let<a aria-hidden="true" class="hash-link" href="#let" title="Direct link to heading">â€‹</a></h3><p><code>let</code>s in ReScript and F# are the same as in Dark:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">45</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>let</code> also allow destructing in ReScript/F#, although we don&#x27;t currently use
that very often.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="if">If<a aria-hidden="true" class="hash-link" href="#if" title="Direct link to heading">â€‹</a></h3><p><code>if</code> statements in F#/OCaml are extremely similar to Dark, including that they
only allow <code>bool</code>s as the condition, and in their syntax.</p><p>In F#:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> hasAccess user</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Welcome!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Access denied&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In ReScript:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> hasAccess</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Welcome!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Access denied&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="operators">Operators<a aria-hidden="true" class="hash-link" href="#operators" title="Direct link to heading">â€‹</a></h3><p>F# has some unusual operators. Most importantly, the equality operator is <code>=</code>
(that&#x27;s just one equals sign), whereas in most languages it&#x27;s <code>==</code> (including
Dark and ReScript). <code>=</code> is very strict equality, equivalent to <code>===</code> in languages that have
that, such as JS.</p><p>F# also has a <code>==</code> operator, but you should never use it.</p><p>F# use <code>&lt;&gt;</code> for inequality (<code>!=</code> in Dark and ReScript). In ReScript, most of
the comparison operators (such as <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, etc) only operate on
integers, and not on floats. In F#, they work on both ints and floats.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="match">Match<a aria-hidden="true" class="hash-link" href="#match" title="Direct link to heading">â€‹</a></h3><p>Dark has a <code>match</code> statement that is very similar to F#/ReScript, with slightly
different syntax. In Dark you write:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">match</span><span class="token plain"> myValue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>while in F# you write</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">match</span><span class="token plain"> myValue </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Notice the <code>with</code> keyword, and starting the patterns with <code>|</code>.</p><p>In ReScript you write:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">switch myValue </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>F#/ReScript also support more powerful <code>match</code>es, for example multiple patterns
can match a single branch:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">match</span><span class="token plain"> myValue </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;between 4 and 6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;not between 4 and 6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>F# also supports the <code>when</code> clause:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">match</span><span class="token plain"> myValue </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> myInt </span><span class="token keyword" style="font-style:italic">when</span><span class="token plain"> myInt </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> myInt </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;between 4 and 6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;not between 4 and 6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is called an <code>if</code> in ReScript:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">switch myValue </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myInt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> myInt </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> myInt </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;between 4 and 6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;not between 4 and 6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Be careful of very subtle bugs when combining multiple patterns with <code>when</code>
clauses: the entire pattern will fail if the pattern matches when the clause
does not:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myValue </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">match</span><span class="token plain"> myValue </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> myInt </span><span class="token keyword" style="font-style:italic">when</span><span class="token plain"> myValue </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&gt;</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;this will never succeed&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;this will succeed as a fallback&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="variants">Variants<a aria-hidden="true" class="hash-link" href="#variants" title="Direct link to heading">â€‹</a></h3><p>Dark has a handful of enums for <code>Option</code> and <code>Result</code> types: <code>Just</code>, <code>Nothing</code>,
<code>Ok</code> and <code>Error</code>. In the future we will expand this to allow user-defined types
as well.</p><p>ReScript/F# support the <code>Option</code> and <code>Result</code> types and we use them a lot.
However, the constructors for Option are named differently; both languages use:
<code>Some</code> and <code>None</code> instead of <code>Just</code> and <code>Nothing</code>.</p><p>These enums are typically called &quot;variants&quot;. We use them frequently, especially
to represent expressions. For example in <code>FluidExpression.fs</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EInteger</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EBool</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> bool</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EString</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EFloat</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">ENull</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EBlank</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">ELet</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EIf</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EBinOp</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> sendToRail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">ELambda</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">analysisID </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> list </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EFieldAccess</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EVariable</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EFnCall</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t list </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> sendToRail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EPartial</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">ERightPartial</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">ELeftPartial</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Shared</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EList</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">ERecord</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EPipe</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EConstructor</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EMatch</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token module variable" style="color:rgb(191, 199, 213)">FluidPattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EPipeTarget</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EFeatureFlag</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> t</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Type <code>t</code> (it&#x27;s a common convention to name the main type of a module <code>t</code>) must
be one of <code>EInteger</code>, <code>EBool</code>, <code>EString</code>, etc. <code>EInteger</code> takes two parameters,
an <code>id</code> and a <code>string</code> (we use a string to represent integers as Bucklescript
doesn&#x27;t have a big enough integer type).</p><p>To create a <code>t</code>, you&#x27;d do something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> expr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EInteger</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To get values from them, you pattern match:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">match</span><span class="token plain"> expr </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">EInteger</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> str</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;not an int&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="lambdas">Lambdas<a aria-hidden="true" class="hash-link" href="#lambdas" title="Direct link to heading">â€‹</a></h3><p>ReScript and F# support lambdas and we use them frequently. They have a
different syntax to Dark, F# uses:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|&gt;</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">List</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">fun</span><span class="token plain"> elem </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> elem </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>and ReScript uses:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">list</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token module variable" style="color:rgb(191, 199, 213)">List</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> elem </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It&#x27;s very common to use functions like <code>List.map</code> which have a parameter called
<code>f</code> which take a lambda. In F#, above, that parameter is passed like any other.
In ReScript, those parameters are passed as labelled variables:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">list</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token module variable" style="color:rgb(191, 199, 213)">List</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token label function" style="color:rgb(130, 170, 255)">~f</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> elem </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="pipes">Pipes<a aria-hidden="true" class="hash-link" href="#pipes" title="Direct link to heading">â€‹</a></h3><p>Both languages have pipes which are the same as in Dark. In Dark, the passed argument goes into the first position. That is also true in ReScript, but not in F#, where it goes into the last position. As a result, we tend to put the &quot;subject&quot; of the function in the pipeable position (first in Dark and ReScript, last in F#). <strong>Note that ReScript uses to have to pipe into the last position but now does first by default; much of our code was designed to work pipe-last, instead of pipe-first, and we&#x27;ll need to migrate to pipe-first.</strong></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="dictionaries">Dictionaries<a aria-hidden="true" class="hash-link" href="#dictionaries" title="Direct link to heading">â€‹</a></h3><p>Dictionaries (hash-maps, etc) are typically called <code>Map</code> in F#/ReScript. In
ReScript, they are slightly challenging to use, which is one reason you won&#x27;t
see them used as much as they really should be.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="unit">Unit<a aria-hidden="true" class="hash-link" href="#unit" title="Direct link to heading">â€‹</a></h3><p>F#/ReScript have a <code>unit</code> type, whose only member is <code>()</code>. That&#x27;s an actual
value, for example, all this is valid code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> falseVar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It&#x27;s typically used to pass to a function which is impure but doesn&#x27;t have any
meaningful arguments, such as <code>gid ()</code> (which generates IDs).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="error-handling">Error handling<a aria-hidden="true" class="hash-link" href="#error-handling" title="Direct link to heading">â€‹</a></h3><p>Typically we use <code>Result</code> or <code>Option</code>s for error handling. You&#x27;ll very commonly
see something like</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> isRailable </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">m </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|&gt;</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Functions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">find name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|&gt;</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Option</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">fun</span><span class="token plain"> fn </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">fnReturnTipe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">TOption</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">fnReturnTipe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">TResult</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">|&gt;</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Option</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">withDefault </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To find out if a function goes on the error rail, we search for a function,
which returns an Option. We then use a <code>map</code> to operate on the option, and
finally choose a default in case the Option returned <code>None</code>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="exceptions">Exceptions<a aria-hidden="true" class="hash-link" href="#exceptions" title="Direct link to heading">â€‹</a></h4><p>F# and ReScript also have exceptions - we hardly use them in the client, but
unfortunately use them a little bit on the backend, which we&#x27;d like to do less
of.</p><p>Unfortunately, it&#x27;s hard to tell when an exception could be thrown.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="imperative-programming">Imperative programming<a aria-hidden="true" class="hash-link" href="#imperative-programming" title="Direct link to heading">â€‹</a></h3><p>F# and ReScript support imperative programming which Dark does not support yet.</p><p>In ReScript there are mutable values called refs, that can be updated:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;old value&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">myString </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;new value&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">//</span><span class="token plain"> update contents </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> myString</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">print_endline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">contents</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>F# has mutable values that it prefers to refs (it has refs, but they&#x27;re deprecated). Mutable values are used like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">mutable</span><span class="token plain"> myString </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;old value&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">myString </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;new value&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="advanced-functions">Advanced functions<a aria-hidden="true" class="hash-link" href="#advanced-functions" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_31ik" id="named-parameters">Named parameters<a aria-hidden="true" class="hash-link" href="#named-parameters" title="Direct link to heading">â€‹</a></h4><p>ReScript Functions support named parameters, which you might see called like
this (note the <code>~</code>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token module variable" style="color:rgb(191, 199, 213)">Option</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">withDefault</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token label function" style="color:rgb(130, 170, 255)">~default</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Some</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>These are useful as a named parameter can be placed in any order (this is also
useful for piping).</p><p>You declare functions with named parameters like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myFunction </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">regularParamter </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token label function" style="color:rgb(130, 170, 255)">~namedParam</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">body </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>These are not in F# or Dark.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="optional-parameters">Optional parameters<a aria-hidden="true" class="hash-link" href="#optional-parameters" title="Direct link to heading">â€‹</a></h4><p>ReScript also supports optional parameters, which F# and OCaml do not.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myFunction </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain">optionalParam</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> regularParamter </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">body </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="the-rec-and-and-keywords">the <code>rec</code> and <code>and</code> keywords<a aria-hidden="true" class="hash-link" href="#the-rec-and-and-keywords" title="Direct link to heading">â€‹</a></h4><p>By default, F#/ReScript functions are not recursive: they cannot call
themselves. To allow a function to call itself, add the <code>rec</code> keyword:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">rec</span><span class="token plain"> myFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">var </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> var </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> myFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">var </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Similarly, if two functions need to call each other, they need to be aware of
each other (F#/ReScript programs require all functions to be defined before they
are used). The <code>and</code> keyword allows this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> firstFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">var </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">secondFunction var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">and</span><span class="token plain"> secondFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">var </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> var </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> firstFunction </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> firstFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">var </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="partial-application--currying">Partial application / currying<a aria-hidden="true" class="hash-link" href="#partial-application--currying" title="Direct link to heading">â€‹</a></h4><p>Occasionally you&#x27;ll see a function called with fewer arguments than it has
parameters:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">param1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">param2 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myOtherFunction </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> myFunction </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is called &quot;partial application&quot;, in that the function is only partially
called (this is often called <em>Currying</em> in the functional language community).
This just means that some parameters are filled in, and you now have a function
which can be called with the remaining parameters:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  myOtherfunction </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;final argument&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is the same as if it were defined as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myOtherFunction </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">param </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  myFunction </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"> param</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="modules">Modules<a aria-hidden="true" class="hash-link" href="#modules" title="Direct link to heading">â€‹</a></h3><p>ReScript has a complex module system, which takes some time to grasp. Modules
can have parameters, have inheritance, and each other these features uses a
complicated, difficult to grasp syntax.</p><p>We only barely use modules in the Dark codebase, so here&#x27;s what you need to
know:</p><ul><li><p>all files are automatically modules. Note that in the backend, modules need to
have their directory names included, but not in the client.</p></li><li><p>using a module is simple:</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">open</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">MyModule1</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">(* all function and types are available *)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">module</span><span class="token plain"> M </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">MyModule2</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">(* access members as if the module was called M *)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">MyModule3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">myFunction </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>the syntax of creating a module is also straightforward:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">module</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">MyModule</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> t </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myfunction x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We typically <code>open</code> the <code>Prelude</code> and <code>Types</code> modules at the top of all files
(which in turn open other modules, like <code>Tablecloth</code> on the client).</p><p>F# does have modules, but it does not support any of the complex stuff that
ReScript does.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="classes-and-objects">Classes and Objects<a aria-hidden="true" class="hash-link" href="#classes-and-objects" title="Direct link to heading">â€‹</a></h3><p>ReScript supports traditional object oriented programming, though it&#x27;s not used
very much and very discouraged. The only place we really use it for interacting
with JS (the ReScript JS interop code compiles it to direct OO in JS).</p><p>F# has OO that is used to interact with .NET types, and call C# libraries. We do
not use it very much but we do use it some. Defining a method:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token module variable" style="color:rgb(191, 199, 213)">Pos</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> x </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> y </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  member this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token module variable" style="color:rgb(191, 199, 213)">JustXPlease</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  override member this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token module variable" style="color:rgb(191, 199, 213)">ToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> #&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="rescript-vs-bucklescriptreasonml">ReScript vs Bucklescript/ReasonML?<a aria-hidden="true" class="hash-link" href="#rescript-vs-bucklescriptreasonml" title="Direct link to heading">â€‹</a></h2><p>ReScript is the new name (as of 2020) for what was sometimes called Bucklescript
and sometimes called ReasonML. You may see references to Bucklescript in our
codebase (including the prefix &quot;bs&quot;).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="darks-codebase-history">Dark&#x27;s codebase history<a aria-hidden="true" class="hash-link" href="#darks-codebase-history" title="Direct link to heading">â€‹</a></h2><p>Dark&#x27;s backend was originally written in OCaml, and then ported to F# in 2021.
A lot of code is written the way it is because that made sense in OCaml,
especially code with the comment <code>// CLEANUP</code> in it.</p><p>Dark&#x27;s frontend was originally written in Elm, before being ported. It was
ported to what is now ReScript in 2018, but ReScript itself went through a bit
of an identity crisis. ReScript at the time was sometimes called BuckleScript
and sometimes called ReasonML. In 2021, it officially renamed itself to
ReScript, and changed its official syntax (.res).</p><p>Our frontend used an alternate syntax (.ml, as ReScript is based on OCaml and
we used OCaml on our backend too). We switched over to .res in 2021 - however,
a lot of remnants remain including old comments, and in particular that we
primarily used pipe-last instead of pipe-first.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/darklang/docs/edit/main/docs/contributing/rescript-and-fsharp-for-dark-developers.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/contributing/adding-a-refactoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Adding a refactoring</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/contributing/general-concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">General concepts<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#some-simple-frescript-code" class="table-of-contents__link toc-highlight">Some simple F#/ReScript code</a></li><li><a href="#dark-vs-rescript-vs-f" class="table-of-contents__link toc-highlight">Dark vs ReScript vs F#</a><ul><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#standard-library" class="table-of-contents__link toc-highlight">Standard library</a></li><li><a href="#int" class="table-of-contents__link toc-highlight">Int</a></li><li><a href="#float" class="table-of-contents__link toc-highlight">Float</a></li><li><a href="#bool" class="table-of-contents__link toc-highlight">Bool</a></li><li><a href="#string" class="table-of-contents__link toc-highlight">String</a></li><li><a href="#string-interpolation" class="table-of-contents__link toc-highlight">String Interpolation</a></li><li><a href="#list" class="table-of-contents__link toc-highlight">List</a></li><li><a href="#records" class="table-of-contents__link toc-highlight">Records</a></li><li><a href="#let" class="table-of-contents__link toc-highlight">Let</a></li><li><a href="#if" class="table-of-contents__link toc-highlight">If</a></li><li><a href="#operators" class="table-of-contents__link toc-highlight">Operators</a></li><li><a href="#match" class="table-of-contents__link toc-highlight">Match</a></li><li><a href="#variants" class="table-of-contents__link toc-highlight">Variants</a></li><li><a href="#lambdas" class="table-of-contents__link toc-highlight">Lambdas</a></li><li><a href="#pipes" class="table-of-contents__link toc-highlight">Pipes</a></li><li><a href="#dictionaries" class="table-of-contents__link toc-highlight">Dictionaries</a></li><li><a href="#unit" class="table-of-contents__link toc-highlight">Unit</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error handling</a></li><li><a href="#imperative-programming" class="table-of-contents__link toc-highlight">Imperative programming</a></li><li><a href="#advanced-functions" class="table-of-contents__link toc-highlight">Advanced functions</a></li><li><a href="#modules" class="table-of-contents__link toc-highlight">Modules</a></li><li><a href="#classes-and-objects" class="table-of-contents__link toc-highlight">Classes and Objects</a></li></ul></li><li><a href="#rescript-vs-bucklescriptreasonml" class="table-of-contents__link toc-highlight">ReScript vs Bucklescript/ReasonML?</a></li><li><a href="#darks-codebase-history" class="table-of-contents__link toc-highlight">Dark&#39;s codebase history</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learning</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item">Building Slack Apps</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Blog</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Corp Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1f3903eb.js"></script>
<script src="/assets/js/main.4e7d1b57.js"></script>
<script async="true" defer="true" src="https://cdn.heysavvy.com/wc/savvy.min.js"></script>
        <savvy-smart-form id="6HBmUjmI12nCuopyvB0B"></savvy-smart-form></body>
</html>