<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-walk-throughs/react-app" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Walkthrough: Build a backend to a React app | Dark Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-rh="true" name="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-rh="true" property="og:url" content="https://docs.darklang.com/walk-throughs/react-app"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Walkthrough: Build a backend to a React app | Dark Documentation"><meta data-rh="true" name="description" content="Watch a demo video of this project:"><meta data-rh="true" property="og:description" content="Watch a demo video of this project:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.darklang.com/walk-throughs/react-app"><link data-rh="true" rel="alternate" href="https://docs.darklang.com/walk-throughs/react-app" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.darklang.com/walk-throughs/react-app" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QFOZBC0VVL-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.c0fb250a.css">
<script src="/assets/js/runtime~main.92e6e8ad.js" defer="defer"></script>
<script src="/assets/js/main.c70386c6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Darklang logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.ico" alt="Darklang logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Darklang</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Classic</a><a class="navbar__item navbar__link" href="/next/introduction">Next</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/introduction">Overview of Darklang Classic</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/tutorial">Tutorial</a><button aria-label="Expand sidebar category &#x27;Tutorial&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/walk-throughs">Walk-throughs</a><button aria-label="Collapse sidebar category &#x27;Walk-throughs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/walk-throughs/react-app">React: Build a backend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/slack-app">Slack: send and receive messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/external-db">Using an External DB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/slack-channel-check">Slack: check for new channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/slack-asana">Asana: create tasks and projects from Slack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/slack-trello">Trello: Create a new card from Slack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/twilio-app">Twilio: send and receive texts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/ifttt-events">IFTTT: trigger an event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/airtable">Airtable: fetch and update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/walk-throughs/freshdesk">Freshdesk: Fetch and update tickets</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/how-to">How-to Guides</a><button aria-label="Expand sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/discussion">Discussion</a><button aria-label="Expand sidebar category &#x27;Discussion&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/changelog">Changelog</a><button aria-label="Expand sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/walk-throughs"><span itemprop="name">Walk-throughs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">React: Build a backend</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Walkthrough: Build a backend to a React app</h1></header><p>Watch a demo video of this project:
<a href="https://vimeo.com/360007420/01c205fe0f" target="_blank" rel="noopener noreferrer">https://vimeo.com/360007420/01c205fe0f</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h4>
<p>Darklang allows you to build backends (API endpoints, workers, cron, and data
storage) by writing only your business logic, using production traces.</p>
<p>You can access you canvas at darklang.com/a/USERNAME-CANVASNAME (we recommend
USERNAME-signin for this project).</p>
<p>First, on that canvas build a hello world API endpoint to get a feel for
Darklang:</p>
<p><img loading="lazy" alt="reactspa/image15.gif" src="/assets/images/image15-d085d172a7f4085eacdae2344bbc04fc.gif" width="640" height="336" class="img_ev3q"></p>
<p>All the major handlers work the same way, but the key for many requests is
working directly with incoming data.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="this-guide---office-sign-in">This Guide - Office Sign-in<a href="#this-guide---office-sign-in" class="hash-link" aria-label="Direct link to This Guide - Office Sign-in" title="Direct link to This Guide - Office Sign-in">​</a></h4>
<p>We’re building this app:
<a href="https://sample-signin.builtwithdark.com/" target="_blank" rel="noopener noreferrer">https://sample-signin.builtwithdark.com</a>.
It’s an <a href="https://github.com/darklang/dark-signin" target="_blank" rel="noopener noreferrer">Office Sign-in SPA</a>, built in
React. From the form, you pick a host, announce your name as the visitor).</p>
<p>The application backend will have an API, data storage, and asynchronous
background workers to talk to external APIs (Twilio &amp; Slack). You will need
Twilio &amp; Slack tokens, which we explain how to get below during that portion of
the tutorial.</p>
<p>Yours will live at [<a href="https://USERNAME-signin.builtwithdark.com" target="_blank" rel="noopener noreferrer">https://USERNAME-signin.builtwithdark.com</a>];<!-- --> to work on it go
to [<a href="https://darklang.com/a/USERNAME-signin" target="_blank" rel="noopener noreferrer">https://darklang.com/a/USERNAME-signin</a>].</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick start" title="Direct link to Quick start">​</a></h3>
<p>We’ll need some setup on your machine to upload the react app. Run these
commands on OSX to install. To read a longer version explaining what each of
these commands do, go here:</p>
<p><a href="/how-to/static-assets">Hosting Static Assets in Darklang</a></p>
<p>Note, replace anywhere that says USERNAME and PASSWORD with your Darklang
username and password.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://github.com/darklang/dark-signin.git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd dark-signin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run build-for USERNAME-signin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run get-dark-cli</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./dark-cli-apple --canvas USERNAME-signin --user USERNAME --password PASSWORD build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you get “Not found” on the last step, you’ll need to visit
[<a href="https://darklang.com/a/USERNAME-signin" target="_blank" rel="noopener noreferrer">https://darklang.com/a/USERNAME-signin</a>]<!-- --> first in your browser.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="serving-hosted-assets">Serving Hosted Assets<a href="#serving-hosted-assets" class="hash-link" aria-label="Direct link to Serving Hosted Assets" title="Direct link to Serving Hosted Assets">​</a></h4>
<p>When you go back to Darklang, your assets will be available (in this case, our
compiled Javascript application).</p>
<p><img loading="lazy" alt="reactspa/image24.png" src="/assets/images/image24-e32534d9cce9d97091cce88daa1113f3.png" width="646" height="824" class="img_ev3q"></p>
<p>Now, let’s put the assets at the base of our API by creating a new route named
<code>/</code> from the omnibox, or the side bar:</p>
<p><img loading="lazy" alt="reactspa/image22.png" src="/assets/images/image22-6441cf8e74fa9c41419e6c3065a45471.png" width="962" height="360" class="img_ev3q"></p>
<p>Once the route is created, we can specify it’s a <code>GET</code> method, and start writing
code.</p>
<p><img loading="lazy" alt="reactspa/image2.png" src="data:image/png;base64,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" width="818" height="158" class="img_ev3q"></p>
<p><img loading="lazy" alt="reactspa/image21.png" src="/assets/images/image21-6cbeb1757cc510e8168f0ab5a7f199eb.png" width="1076" height="470" class="img_ev3q"></p>
<p>The finished API will look like this, and you can open it from the hamburger on
the right (the tutorial copy is at
<a href="https://sample-signin.builtwithdark.com/" target="_blank" rel="noopener noreferrer">https://sample-signin.builtwithdark.com/</a>,
and your copy is at USERNAME-signin.builtwithdark.com/).</p>
<p><img loading="lazy" alt="reactspa/image4.png" src="/assets/images/image4-09740350f13ee5fcf12771b81d2a8b1d.png" width="848" height="152" class="img_ev3q"></p>
<p>When you open the page it looks like this:</p>
<p><img loading="lazy" alt="hassets/reactspa/image29.png" src="/assets/images/image29-d21a643d9da04617dff6ea1511f03a4d.png" width="1568" height="812" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-api---trace-driven-development">Building the API - Trace Driven Development<a href="#building-the-api---trace-driven-development" class="hash-link" aria-label="Direct link to Building the API - Trace Driven Development" title="Direct link to Building the API - Trace Driven Development">​</a></h4>
<p>Now, we can build a backend based on the frontend we have. The react app has two
requirements:</p>
<ul>
<li><code>GET</code> <code>Hosts</code> - Providing the list of available hosts.</li>
<li><code>POST</code> <code>Visit</code> - Checking in and triggering what needs to happen when a
visitor arrives.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-hosts-endpoint-api-datastore-repl">Setting Up the /hosts Endpoint (API, Datastore, REPL)<a href="#setting-up-the-hosts-endpoint-api-datastore-repl" class="hash-link" aria-label="Direct link to Setting Up the /hosts Endpoint (API, Datastore, REPL)" title="Direct link to Setting Up the /hosts Endpoint (API, Datastore, REPL)">​</a></h4>
<p>From Darklang, we can see the failed request.</p>
<p><img loading="lazy" alt="reactspa/image3.png" src="/assets/images/image3-223adac0fe504dd7f4f9e8221a373737.png" width="686" height="184" class="img_ev3q"></p>
<p>If you do not see a failed request, verify that your host URL in your frontend
matches where you’ve hosted the application.</p>
<p>Hit the <code>+</code> button to create the route. The route will have the trace from when
we opened the page.</p>
<p><img loading="lazy" alt="reactspa/mage32.png" src="/assets/images/image32-d7c97436369cdbf8cdfc9edffffad80e.png" width="1456" height="734" class="img_ev3q"></p>
<p>Now we have our endpoint (you can try it out by making a list
<code>[&quot;name1&quot;, &quot;name2&quot;]</code> and refreshing the React application:</p>
<p><img loading="lazy" alt="reactspa/image1.png" src="data:image/png;base64,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" width="868" height="186" class="img_ev3q"></p>
<p>But for the longer term, we’ll need other backend components (in particular a
datastore) to support the endpoint.</p>
<p>Create a datastore which lists all hosts. We can create it from the omnibox or
the left side bar, and rename it. We can also choose other parameters. In this
case, I’ve chosen phone numbers and Slack IDs to send texts and DMs.</p>
<p>Datastores in Darklang are key-value based, not relational. This tutorial will
include step by step instructions, but more information on datastores is
available <a href="/discussion/dark-backend-components#persistent-datastores">here</a>.</p>
<p><img loading="lazy" alt="reactspa/image7.png" src="/assets/images/image7-3e8cc3ee5f038900d5f1c1523d683f94.png" width="780" height="394" class="img_ev3q"></p>
<p>We can add data to the datastore by using a REPL, an internal tool for the
application.</p>
<p>We can name the REPL (or it will have a default adjective-animal name) and then</p>
<p><img loading="lazy" alt="reactspa/image6.png" src="/assets/images/image6-01c115000535af0e85fc6c213f75e48f.png" width="1042" height="174" class="img_ev3q"></p>
<p>When we write <code>DB::set</code> into the handler, we’re given three parameters for the
expression. The value, the unique identifier for the record, and the table.</p>
<p>Here’s the finished REPL:</p>
<p><img loading="lazy" alt="reactspa/image14.png" src="/assets/images/image14-80f50dc214b7c001f0b64e2a91047532.png" width="836" height="428" class="img_ev3q"></p>
<p>In this case, I chose to define <code>slackid</code> as a variable so I could reuse it as a
unique key. You can do this after the fact using <code>Cmd/Ctrl-\</code> on the value to
extract a variable, or just rewrite starting from the top.</p>
<p><strong>Please Use your own name, phone number, and Slack ID.</strong> Your Slack ID is found
in your profile in the … menu. You will need permission to install Slack apps on
a Slack to do this.</p>
<p><img loading="lazy" alt="reactspa/image34.png" src="/assets/images/image34-c5f0859987e15aa3393268b1cbfa4579.png" width="814" height="1482" class="img_ev3q"></p>
<p>Press the “play” button to insert the value into the datastore
(<a href="https://docs.google.com/document/d/15u_iXi5FZXPX-hn71NqMH8vMLfNQMw3NMD8EOui3m2g/edit?folder=0AJNj3YlxhMcIUk9PVA#heading=h.582o5mgjxu9a" target="_blank" rel="noopener noreferrer">more on interactivity with play buttons</a>).</p>
<p>After this, when I select my datastore, I will see that it has locked and has a
connection to the REPL, and the number of items/most recent item (if you do not
see the DB stats on the left, refreshing the tab should work).</p>
<p><img loading="lazy" alt="reactspa/image19.png" src="/assets/images/image19-48a907653c83597008d59d245a025c15.png" width="1704" height="402" class="img_ev3q"></p>
<p>Then, you can update the hosts API to use our data storage.</p>
<p><img loading="lazy" alt="reactspa/image5.png" src="/assets/images/image5-88393321ab689a9ee3caa44fe5f3c9ad.png" width="838" height="204" class="img_ev3q"></p>
<p>In this case we did a <code>DB::getAll</code> hosts (and played the request). Then, we took
that result (a list of objects) and passed it as a parameter into <code>List::map</code>,
then took the name for each host.</p>
<p>To see how this works, click first on <code>DB::getAll</code> to see the list of objects,
then click on <code>\val</code> to see an example object, and then <code>val.name</code> will show you
the <code>name</code> field.
<a href="/discussion/functional-aspects">Functional aspects of Darklang</a> has more
information on pipelines and maps, but for the tutorial copying this code will
work.</p>
<p>If you are stuck:</p>
<ol>
<li>Make sure to hit the play button for <code>DB::getAll</code> so you’ll have real data.</li>
<li>Shift-enter or <code>|&gt;</code> will open the pipeline.</li>
<li>Typing <code>\</code> in the <code>block</code> field will open the <code>\val</code> operator.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-visits-endpoint-api-datastore-workers">Setting up the /visits Endpoint (API, Datastore, Workers)<a href="#setting-up-the-visits-endpoint-api-datastore-workers" class="hash-link" aria-label="Direct link to Setting up the /visits Endpoint (API, Datastore, Workers)" title="Direct link to Setting up the /visits Endpoint (API, Datastore, Workers)">​</a></h4>
<p>First, we do the same thing and go back to our React application, select a host,
then type in a visitor name and hit the “sign in” button. This will result in
another 404 that we can create, and see the trace for.</p>
<p><img loading="lazy" alt="reactspa/image26.png" src="/assets/images/image26-efa5db127ea648482600c988f7df81fd.png" width="1428" height="450" class="img_ev3q"></p>
<p>First, we’ll store the visit in a datastore as we did from the REPL when
creating hosts. Like before, we can create a new datastore, and then use the
<code>DB::set</code> expression.</p>
<p>If we match the datastore schema to our incoming request body, we can do it like
this:</p>
<p><img loading="lazy" alt="reactspa/image17.png" src="/assets/images/image17-bb03567f9d66a62c97cf5ba0775fba33.png" width="846" height="592" class="img_ev3q"></p>
<p>If our schema does not match exactly, we can still use our incoming request.
Here’s a version that also stores the time of the visit:</p>
<p><img loading="lazy" alt="reactspa/mage28.png" src="/assets/images/image28-7f0f372afb76c8f6882c2f302b5c538f.png" width="888" height="860" class="img_ev3q"></p>
<p>In either case, taking advantage of live values and traces is very helpful. When
our cursor is in host, we can see what the trace evaluates to for that value on
the left-hand side:</p>
<p><img loading="lazy" alt="reactspa/image9.png" src="/assets/images/image9-c3955deb106a5038113c1d9fcfe91ce8.png" width="926" height="378" class="img_ev3q"></p>
<p>Then, as before, we can run the outstanding functions and insert this trace into
our datastore (in this case, we’re building from this specific trace. In the
future, when a new sign in happened, this handler would run at that time).</p>
<p>If you’re having trouble, make sure you’ve hit the play buttons and do not have
red underlines. The finished handler &amp; datastore once you’ve run and inserted
the visit will look like this:</p>
<p><img loading="lazy" alt="reactspa/image23.png" src="/assets/images/image23-4fa3d50f3ae8a1d8e88c8fcdaeec8e2a.png" width="836" height="774" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="background-workers--external-api-connections">Background Workers &amp; External API connections<a href="#background-workers--external-api-connections" class="hash-link" aria-label="Direct link to Background Workers &amp; External API connections" title="Direct link to Background Workers &amp; External API connections">​</a></h4>
<p>For this section you will need a Twilio SID &amp; Token and/or a Slack Token,
depending on if you want to send Texts, DMs, or both.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="twilio">Twilio<a href="#twilio" class="hash-link" aria-label="Direct link to Twilio" title="Direct link to Twilio">​</a></h4>
<p>To create a new <a href="https://twilio.com/" target="_blank" rel="noopener noreferrer">Twilio account</a>, the SID &amp; Token are in
your console on the right hand side.</p>
<p><img loading="lazy" alt="reactspa/image11.png" src="/assets/images/image11-2f9570ae1d84c90b40e94703121781d1.png" width="2500" height="728" class="img_ev3q"></p>
<p>Once you have an account, you’ll need a number that can send texts,
<a href="https://www.twilio.com/console/phone-numbers/incoming" target="_blank" rel="noopener noreferrer">https://www.twilio.com/console/phone-numbers/incoming</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="slack">Slack<a href="#slack" class="hash-link" aria-label="Direct link to Slack" title="Direct link to Slack">​</a></h4>
<p>To create a Slack token, go to <a href="https://slack.com/api" target="_blank" rel="noopener noreferrer">https://slack.com/api</a>,
create a new application, add a bot from the “basic information” add features &amp;
functionality section, and install the app in your workspace. After doing so,
you’ll get two tokens back, one of which is the format &quot;xoxb-*&quot;.</p>
<p><img loading="lazy" alt="reactspa/image33.png" src="/assets/images/image33-ef10873cc1d1b04188ae9c27577c2e5b.png" width="1164" height="882" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="twilio-text-message-integration">Twilio Text Message Integration<a href="#twilio-text-message-integration" class="hash-link" aria-label="Direct link to Twilio Text Message Integration" title="Direct link to Twilio Text Message Integration">​</a></h4>
<p>Back in our post visits handler, hit enter at the end of the line to write more
code (This converts our <code>DB::set</code> action into a statement. Not necessary reading
now, but more on implicit returns is in the
<a href="/discussion/functional-aspects">functional aspects of Darklang</a>).</p>
<p>To send information to be used asynchronously (like for API calls) we can use
the keyword emit to emit to an async background worker with a queue.</p>
<p>Here, we emit the <code>request.body</code> (seen in a live value on the left) to a worker
named <code>sendText</code>. Hitting play will create a 404 for that worker, much like how
we created our visit and host endpoints.</p>
<p><img loading="lazy" alt="reactspa/image30.png" src="/assets/images/image30-7777150dd7b4a733355acae52ee7bf06.png" width="1152" height="552" class="img_ev3q"></p>
<p>When created, the worker will have the event information as a trace:</p>
<p><img loading="lazy" alt="reactspa/image10.png" src="/assets/images/image10-4f6e37864c0da8858be7f914b5449e93.png" width="1218" height="306" class="img_ev3q"></p>
<p>For this worker, we need to get the host’s phone number and then send them a
text. This is very similar to the code we wrote before to get the host’s name.</p>
<p>In this case we use <code>DB::queryOne</code> to get only one response, and look by
<code>hostname</code>. Then we can play the query, and make a variable for the field.</p>
<p><img loading="lazy" alt="reactspa/image12.png" src="/assets/images/image12-4c3029d545005b0f104a0b9a18b85352.png" width="824" height="380" class="img_ev3q"></p>
<p>The last step is adding the <code>Twilio::sendText</code> function, which takes five
parameters. The <code>SID</code>, <code>Token</code>, and <code>number</code> you got from Twilio, the
<code>hostphone</code> above, and the message you’d like to send.</p>
<p><img loading="lazy" alt="reactspa/image20.png" src="/assets/images/image20-9af10df9de383da35f5ae090188b41d5.png" width="2042" height="382" class="img_ev3q"></p>
<p>When you’ve added yours, it will look like this (but with your tokens).</p>
<p><img loading="lazy" alt="reactspa/image18.png" src="/assets/images/image18-fcb0d5e31007a4fbfc8a9481a32095ba.png" width="1760" height="370" class="img_ev3q"></p>
<p>When you hit “play” on <code>sendText</code>, you will be able to see the API response as a
live value, and should receive a text message.</p>
<p><img loading="lazy" alt="reactspa/image27.png" src="/assets/images/image27-2e308c883f250be21ed9a16df1a8a1f5.png" width="1018" height="586" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="slack-dm-integration">Slack DM Integration<a href="#slack-dm-integration" class="hash-link" aria-label="Direct link to Slack DM Integration" title="Direct link to Slack DM Integration">​</a></h4>
<p>We go back to our <code>/visit</code> endpoint to add the Slack worker. We can even copy
most of the code from the beginning of the Twilio handler to get our Slack ID.</p>
<p><img loading="lazy" alt="reactspa/image8.png" src="/assets/images/image8-ba960dfa4a797378d30ff16820c5fb74.png" width="858" height="414" class="img_ev3q"></p>
<p>For this, we’ll be using Slack’s
<a href="https://api.slack.com/methods/chat.postMessage" target="_blank" rel="noopener noreferrer"><code>chat.postMessage</code> API method</a>,
which requires the method URL:
<a href="https://slack.com/api/chat.postMessage" target="_blank" rel="noopener noreferrer">https://slack.com/api/chat.postMessage</a>
and pass a header with a content type and a token.</p>
<p>There are built in methods for formatting headers in the <code>HttpClient</code> library.</p>
<p><img loading="lazy" alt="reactspa/image31.png" src="/assets/images/image31-ebf9ef08a865e6edfc856b3b2b833abb.png" width="1118" height="474" class="img_ev3q"></p>
<p>Finally, we have to make the post request, which takes four parameters,
including a body.</p>
<p><img loading="lazy" alt="reactspa/image25.png" src="/assets/images/image25-682f56128e07bf80c645faaf9e54f8ce.png" width="1412" height="512" class="img_ev3q"></p>
<p>You can fill them in as follows from the above code:</p>
<p><img loading="lazy" alt="reactspa/image13.png" src="/assets/images/image13-aa4f819c7d0e07e5395255b7e4e0d623.png" width="1036" height="278" class="img_ev3q"></p>
<p>When you hit play, you should receive a DM from your Slackbot, as well as an
inline API response.</p>
<p><img loading="lazy" alt="reactspa/image16.png" src="/assets/images/image16-e72e10f344f564c1852ad35a73c52ea6.png" width="1636" height="276" class="img_ev3q"></p>
<p>If it isn’t working, check that all parameters (including <code>{}</code> in the query
field) are correct, and read the API response message to debug.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="thats-it">That’s it!<a href="#thats-it" class="hash-link" aria-label="Direct link to That’s it!" title="Direct link to That’s it!">​</a></h4>
<p>Now you should have a working React application with an API, persistent data
storage, and asynchronous background workers, hosted at
[<a href="https://username-signin.builtwithdark.com" target="_blank" rel="noopener noreferrer">https://username-signin.builtwithdark.com</a>].<!-- --> When you go back to your React app
and submit a new visit, you should receive both a Slack and a Text.</p>
<p>(Interested more in Slack apps? We have <a href="/walk-throughs/slack-app">a guide</a>
for that!)</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/darklang/docs/edit/main/docs-classic/walk-throughs/react-app.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/category/walk-throughs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Walk-throughs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/walk-throughs/slack-app"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Slack: send and receive messages</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick start</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learning</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/first-dark-application">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/category/walk-throughs">Walk-throughs</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://darklang.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://darklang.com/discord-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Discord</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>