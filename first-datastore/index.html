<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml">
<link rel="preconnect" href="https://cdn.heapanalytics.com">
<link rel="dns-prefetch" href="https://cdn.heapanalytics.com">
<script>window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])},heap.load(477722926)</script>
<link rel="preconnect" href="https://cdn.heysavvy.com">
<link rel="dns-prefetch" href="https://cdn.heysavvy.com"><title data-react-helmet="true">Your first Datastore | Dark Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/first-datastore"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Your first Datastore | Dark Documentation"><meta data-react-helmet="true" name="description" content="In the last section, we made a HTTP request that created a 404. We&#x27;ll use _the"><meta data-react-helmet="true" property="og:description" content="In the last section, we made a HTTP request that created a 404. We&#x27;ll use _the"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/first-datastore"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/first-datastore" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.darklang.com/first-datastore" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e5ea1f16.css">
<link rel="preload" href="/assets/js/runtime~main.d38c8ee9.js" as="script">
<link rel="preload" href="/assets/js/main.d604d3dd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/favicon.ico" alt="Dark logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Dark</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="theme-doc-markdown markdown"><header><h1>Your first Datastore</h1></header><p>In the last section, we made a HTTP request that created a 404. We&#x27;ll use <em>the
trace</em> of that HTTP request to build an endpoint, a technique we call <strong>Trace
Driven Development</strong>.</p><ol><li>Hit the plus (+) button in the 404 section of the sidebar. This creates a
HTTP endpoint with the HTTP verb (POST) and path (/test) set from the request
that creates the 404.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.44.54_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.44.54_AM-c35473b6dfa9e5e984e6c497c4948e03.png"></p><ol start="2"><li>Hover over the white dot on the left hand side. Here, you can see the full
body of the incoming trace from when you posted to the endpoint from the
REPL, including the body.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.45.57_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.45.57_AM-8b17b971fe9747128d7c1727dd0c2b35.png"></p><ol start="3"><li>Let&#x27;s save the <code>request</code> body to a variable by typing
<code>let data = request.body</code>. As you can see, the autocomplete knows the field
names of <code>request</code> from the trace, and will complete them for you.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.47.10_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.47.10_AM-e5c3345e0e4829d3bc00434b91af58eb.png"></p><ol start="4"><li>Let&#x27;s put this in a datastore. Like we saw with the <code>HttpClient</code> library,
typing &quot;DB&quot; in the blank will pull up all datastore functions.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.48.24_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.48.24_AM-8d398f548be064fee18156e499c7c30f.png"></p><p>In this case, we want <code>DB::set</code>, which takes three arguments.</p><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.48.51_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.48.51_AM-d65c3a3c6bbf857e9f0253221e0c2252.png"></p><ol start="5"><li>Now let&#x27;s make our datastore. From the sidebar or the omnibox, create a new
datastore called &quot;Requests&quot;, with fields <code>data</code> and <code>time</code>.</li></ol><p><img alt="img/gettingstarted/datastore.png" src="/assets/images/datastore-4ddeab6316dd6d42a9f40131e5aab4d8.png"></p><p>Dark&#x27;s datastores are key-value stores; each record has a unique key that is
used to store and retrieve the value. For instance, a possible set of records
with keys in the above datastore would look like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  key1: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          data: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  test: &quot;test2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          time: &lt;Date: 2020-02-11T18:54:39Z&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  key2: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          data: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  test: &quot;test1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          time: &lt;Date: 2020-02-11T18:54:43Z&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="6"><li><p>Now that we have a datastore, let&#x27;s finish our post endpoint.</p><p>The first argument is the record we&#x27;re inserting. This needs to match the
schema, and so it needs to include both <code>date</code> and <code>time</code> (you cannot insert
records that are missing fields). Insert our data from above (seeing the live
value to the left) and use the <code>Date::now</code> function to get the <code>time</code> field.</p></li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.57.58_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.57.58_AM-f9ccb9d544162a11defc7e20bcc5ea43.png"></p><ol start="7"><li>We need a unique key for each record that we store. The <code>DB::generateKey</code>
function generates random keys <!-- -->â€“<!-- --> this is useful when your record has no
obvious unique identifier.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.59.24_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_10.59.24_AM-5c778802071561f8d56509c54f32fb70.png"></p><ol start="8"><li>The final argument is the Datastore: <code>Requests</code>.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_11.00.04_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_11.00.04_AM-f3d0b9106b682171db316604ac028bf0.png"></p><ol start="9"><li>To call the <code>DB::set</code> function, we first need to run the two functions with
side effects (<code>DB::generateKey</code> and <code>Date::now</code>) by hitting the play button.
After hitting those two play buttons, the <code>DB::set</code> play button will be
enabled:</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_11.00.55_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_11.00.55_AM-2f4c3e09ce0ebdfeb8d9c7b7329e6ade.png"></p><ol start="10"><li>Finally, hitting the play button for <code>DB::set</code> inserts the record into the
datastore. This locks the datastore, preventing us from changing the schema,
which we see indicated by the red lock (ðŸ”’) icon.</li></ol><p><img alt="img/gettingstarted/Screen_Shot_2020-02-11_at_11.01.32_AM.png" src="/assets/images/Screen_Shot_2020-02-11_at_11.01.32_AM-2a8cc63ff21c7e9cefa65a72268eb83d.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/darklang/docs/edit/main/docs/first-datastore.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learning</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item">Building Slack Apps</a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Blog</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Corp Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d38c8ee9.js"></script>
<script src="/assets/js/main.d604d3dd.js"></script>
<script async="true" defer="true" src="https://cdn.heysavvy.com/wc/savvy.min.js"></script>
        <savvy-smart-form id="6HBmUjmI12nCuopyvB0B"></savvy-smart-form></body>
</html>